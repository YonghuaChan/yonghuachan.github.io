<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[2020 æœˆä¸ªå››å‰]]></title>
    <url>%2F2020%2F04%2F02%2F2020-summary-Q1%2F</url>
    <content type="text"><![CDATA[åŽ»å¹´9æœˆç»“æŸå­¦ç”Ÿç”Ÿæ¶¯åŽ, å¼€å§‹â€è¸å…¥ç¤¾ä¼šâ€, æ²¡æœ‰å¯¹å­¦ç”Ÿç”Ÿæ´»çš„è¿‡å¤šä¸èˆ(ä¸è¿‡ä¿æŒç€å‡ äººä¸€ç»„çš„å¯†åˆ‡è”ç³»), 2019å¹´å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªæ–°çš„å¼€å§‹â€”â€”æˆ‘å¼€å§‹ç»æµŽç‹¬ç«‹äº†ðŸ˜› # å·¥ä½œåˆ°4æœˆä¸ºæ­¢å·®ä¸å¤šæ­£å¼å·¥ä½œåŠå¹´. ä»Žå·¥ä½œå†…å®¹æ¥çœ‹, å¹³æ—¶çš„èƒ½åŠ›éƒ½èƒ½å¤Ÿè¦†ç›–åˆ°, æ‰€ä»¥å¾ˆå¿«å°±é€‚åº”äº†. ä½†æ˜¯åœ¨è¿›å…¥èŒåœºåŽçž¬é—´å°±ä¼šæ„è¯†åˆ°å’Œå­¦ç”Ÿæ—¶ä»£ çš„å¿ƒæ€å¾ˆä¸ä¸€æ ·, ä½ å¯èƒ½éœ€è¦è€ƒè™‘å‡èŒæ¢¯å­, èŒä¸šè§„åˆ’, é¡¹ç›®å†²å‡»å’Œé£Žé™©, æˆæœ¬, è¿˜æœ‰åœ¨åšé¡¹ç›®çš„è¿‡ç¨‹ä¸­è‡ªå·±æœ‰å“ªæ–¹é¢çš„èƒ½åŠ›æˆ–è€…æŠ€æœ¯å¾—ä»¥æˆé•¿å’Œæå‡, åˆè¦è€ƒè™‘è‡ªå·±çš„äººç”Ÿç†æƒ³, åŒæ—¶å…»è€ä¿é™©, ç”Ÿå‘½ä¿é™©ä¹‹ç±»ä¸€å †çš„äº‹æƒ…ä¼šè®©ä½ æ„è¯†åˆ°ä½ ä¸ä»…è¦è€ƒè™‘çŽ°åœ¨çš„è‡ªå·±, è¿˜è¦ä¸ºæœªæ¥çš„è‡ªå·±åšæ‰“ç®—, ä»¥åŠæœªæ¥çš„å®¶åº­, ä¸‹ä¸€ä»£ç­‰ç­‰. å…¬å¸çš„ä¸Šä¸‹çº§å…³ç³»ä¹Ÿæ¯”å­¦æ ¡é—´çš„å¸ˆç”Ÿä¹‹é—´çš„è·ç¦»è¦æ›´çŸ­ä¸€ç‚¹, ä»Žè€Œä¹Ÿä¼šè®©ä½ æŽ¥è§¦åˆ°ä¸€äº›æ¯”é¡¹ç›®å†…å®¹æœ¬èº«æ›´å¤æ‚çš„ä¸œè¥¿, æ¯”å¦‚å›¢é˜Ÿçš„åˆ©ç›Š, å…¬å¸çš„å‘å±•æ–¹å‘, ç”šè‡³æ˜¯æ›´å¤æ‚çš„å…¬å¸æ”¿æ²»æ–—äº‰ä¹‹ç±»çš„ä¸œè¥¿. åœ¨å®žä¹ æœŸé—´ä¹Ÿçª¥è§ä¸€éš…. å­¦ç”Ÿæ—¶ä»£çš„ç®€å•ç”Ÿæ´»ä¼šè®©æˆ‘æ— æ„é—´å¿½è§†è¿™äº›ä¸œè¥¿, ä½†æ˜¯ä»–ä»¬æ˜¾ç„¶æ˜¯å­˜åœ¨çš„. ä¸€äº›å…¬å¸é«˜å±‚çš„å†³ç­–ä¼šè®©äººè§‰å¾—èµ„æœ¬å®¶æŠŠäººå½“æœºå™¨çš„æ—¶ä»£åˆå›žå½’äº†, åŒæ—¶åˆå¹¸äºŽç›®å‰å·¥ä½œçŽ¯å¢ƒç›¸å¯¹æ¸…æ¾ˆ, ç¬¬ä¸€å¹´ä¹Ÿå¹¶ä¸ä¸ºæ­¤è‹¦æ¼æˆ–è€…æƒ³è¦æ”¹å˜. çŽ°åœ¨2020åˆšè¿‡äº†1/4, ç”±äºŽæ–°å† ç–«æƒ…åˆ©å¥½ä¸šåŠ¡, å•æœˆæœ€å¤§è–ªèµ„up20%, å½“ç„¶æ˜¯åœ¨é«˜è´Ÿå€ºäº†æ•´æœˆçš„æƒ…å†µä¸‹. ðŸ˜¶æ‰“å·¥è€…çš„å›°è‹¦æ˜¯åƒç™¾å¹´æ¥å®¢è§‚å­˜åœ¨çš„é—®é¢˜å§, ç›®å‰ä¸ºæ­¢æŽ’å¿§è§£éš¾çš„åŠžæ³•è¿˜ä¸åœ¨æœ¬å±‚å®žçŽ°. æœ¬åå¹´è¿˜å­˜åœ¨æ‰“å·¥çš‡å¸?(ç¬‘) å¹¸è¿çš„æ˜¯æˆ‘ä»æ²¡æœ‰æŠšå…»æœªæ¥çš„â€å®¶åº­â€, ä»¥åŠâ€ç”Ÿå„¿è‚²å¥³â€ç­‰æ–¹é¢çš„è€ƒè™‘, ðŸ˜ä¸æ˜¯è¿žå¥³æœ‹å‹éƒ½æ²¡æœ‰? èµ„é‡‘å¢žé•¿åŽ‹åŠ›ç›®å‰ä¸ä¼šå¾ˆå¤§. çŽ°åœ¨ä¸ºæ­¢çš„å·¥ä½œçŽ¯å¢ƒä»ç„¶æ˜¯è®©æˆ‘è§‰å¾—èˆ’æœçš„, å·¥ä½œçŽ¯å¢ƒçš„å¸å¼•åŠ›å¯¹ä¸€ä¸ªæ–°æ‰‹æ¥è¯´å¯ä»¥. # ç”Ÿæ´»åœ¨å¹¿å·žè¿™ä¸€å¹´å‡ ä¹Žéƒ½æ˜¯åœ¨å¹¿å·žåº¦è¿‡çš„, ä¸»è¦åŽŸå› æ˜¯äº²äºº, åŒå­¦å¤šæœ‰ç…§åº”æ¥å¾€. ðŸ˜‰ # Work Life Balance å·¥ä½œå’Œå­¦ä¹ æœ€æ˜Žæ˜¾çš„å˜åŒ–æ˜¯ä»€ä¹ˆ? æœ‰è‡ªå·±å¯æ”¯é…çš„èµ„é‡‘, èˆ’æœäº†. ä¸‹ç­æ—¶é—´ä¼šåšä¸€äº›æ‹“å±•, å½“ç„¶ä¹ŸåŒ…æ‹¬ä¼‘é—²å¨±ä¹hhh. æˆ‘è§‰å¾—æœ€æ˜Žæ˜¾çš„å˜åŒ–å°±æ˜¯, è¦ä¸æ–­æ¢³ç†èŒä¸šè§„åˆ’, ç¡®å®šè‡ªå·±çš„å‘å±•æ–¹å‘, å…¬å¸çš„è·¯å’Œä¸ªäººçš„è·¯åœ¨æŸä¸€æ—¶åˆ»æ˜¯é‡åˆçš„, ä½†å¦‚ä½•åˆ›æ–°è·³å‡ºè¿™ä¸ªåœˆ. åˆ¶å®šä¸€ä¸ªå¯æŒç»­çš„è®¡åˆ’æ˜¯å¿…é¡»çš„. å·¥ä½œåŽæ¯å¤©çš„æ—¶é—´èŠ±è´¹åœ¨å“ªé‡Œ? æ¯”ä¾‹æ˜¯å¤šå°‘? æœ‰ä»€ä¹ˆæƒ³æ³•? æ‘¸é±¼è‡³ä¸Š! (å¼€çŽ©ç¬‘çš„) å„ç§çˆ±å¥½çš„è¿›å±•æ€Žä¹ˆæ ·äº†? æ—¥è¯­: 1/100â€¦ðŸ˜£ è§†é¢‘åˆ¶ä½œ: 2/100â€¦ðŸ¤¥ ç»˜ç”»: åœæ»žðŸ¤¨ çŽ‹è€…: ä¸ç»å¸¸æŽ’ä½äº†, åœ¨æ— é™ä¹±æ–—ä¸­è¿·å¤±è‡ªå·±ðŸ™‰ FGO: å¹²å°±vanäº‹äº†â¤ï¸ # ä¸‰è§‚ä»Šå¹´çš„ä¸‰è§‚æ€»ä½“æ²¡æœ‰å¤ªå¤šæ”¹å˜, å°‘éƒ¨åˆ†æƒ³æ³•èŽ·å¾—æ›´æ–°. å¯èƒ½æ˜¯èµ°å…¥ç¤¾ä¼šçš„ç¼˜æ•…, ä¸è‡ªè§‰æ„Ÿåˆ°æ•´ä¸ªç¤¾ä¼šéƒ½åœ¨ä¸€è‚¡åŠ¿ä¸å¯æŒ¡çš„åŠ é€Ÿè¿›ç¨‹ä¸­, ç”µå­è®¾å¤‡ä¸€å¹´å‡ åº¦çš„æ›´æ–°æ¢ä»£, è€Œå„ä¸ªä¼ä¸šæ‰€åšçš„äº§èƒ½å‡çº§, ä¼¼ä¹Žå®ƒä»¬è‡ªèº«ä¹Ÿä¸å¯é¿å…çš„è¢«è£¹æŒŸåˆ°æ´ªæµä¹‹ä¸­. å½“ä¸€ä¸ªå…¬å¸çš„åšå¾—è¶Šå¥½, è‡ªç„¶å°±è¶Šéš¾åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šæœ‰æ‰€çªç ´. ç¼“æ…¢å¢žé•¿åˆæ˜¯æŠ•èµ„è€…æ‰€ä¸å…è®¸çš„. å¸Œæœ›è„šè¸å®žåœ°çš„åœ¨åšäº‹æƒ…çš„å…¬å¸èƒ½å¤ŸæŠµæŠ—ä½äººä»¬ä¸åˆ‡å®žé™…çš„å¢žé•¿é¢„æœŸ, ä¸è¦å„ç§é€šè¿‡åˆ¶é€ æœªæ¥å¢žé•¿å‰æ™¯çš„å¹»æƒ³è€ŒæŠ•æœºå¹»ç­. å°ºåº¦ç¼©å°åˆ°ä¸ªäººçš„ç”Ÿæ´»ä¸­, å·¥ä½œå°±æ˜¯å‡èŒåŠ è–ªèµšå¤§é’±, é‚£èµšäº†é’±ä¹‹åŽé—®é¢˜å°±æ¥äº†, æœ‰è¿™ä¹ˆå¤šé’±, ä¸åŽ»åšæŠ•èµ„, æ¯å¤©é’±éƒ½åœ¨ä»¥è‚‰çœ¼ä¸å¯è§çš„é€Ÿåº¦â€å˜å°â€å‘€, ç­‰è€äº†å°±åªèƒ½æµè½è¡—å¤´äº†. æ‰€ä»¥æˆ‘ä»¬å°±åŽ»æŠ•èµ„å§. æŠ•èµ„è¿™æ–¹é¢æ˜¯æˆ‘çš„çŸ¥è¯†ç›²åŒº, ä¹‹å‰å¤§æ¦‚åªäº†è§£è¿‡å›½å€º, è‚¡ç¥¨, è‚¡å¸‚å’Œæˆ¿ä»·ä¹‹ç±», ä½œä¸ºè¯•æ°´, åœ¨æ”¯ä»˜å®å¼€èµ·äº†åŸºé‡‘çŽ©å…·è½¦ðŸ¤¨ä¸€é¡¿æ“ä½œä¹‹åŽ, ç”±äºŽç–«æƒ…ä¸å¯æŠ—åŠ›, äºäº†ä¸€äº› ðŸ˜¨ çŽ°åœ¨æš‚åœå®šæŠ•ä¸­]]></content>
      <categories>
        <category>MISC</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Async IO in Python]]></title>
    <url>%2F2020%2F01%2F06%2FAsync-IO-in-Python%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡å°†ä¼šè§£é‡Š Python çš„å¼‚æ­¥æ¨¡å— asyncio çš„æ¦‚å¿µå’ŒåŸºæœ¬ç”¨æ³•ã€‚ Async IO æ˜¯ä¸€ç§å¹¶å‘ç¼–ç¨‹è®¾è®¡ï¼Œåœ¨ Python ä¸­å¾—åˆ°äº†ä¸“é—¨çš„æ”¯æŒï¼Œä»Ž Python 3.4è¿…é€Ÿå‘å±•åˆ°3.7ï¼Œç”šè‡³å¯èƒ½æ›´é«˜ã€‚ ä»¥ä¸‹ä½ å°†ä¼šæ¶‰åŠçš„å†…å®¹ å¼‚æ­¥ IO (Asynchronous IO | async IO) : ä¸€ç§ä¸Žè¯­è¨€æ— å…³çš„èŒƒä¾‹(æ¨¡åž‹) ï¼Œå…¶å®žçŽ°è·¨å¤šç§ç¼–ç¨‹è¯­è¨€ async/await: ä¸¤ä¸ªç”¨äºŽå®šä¹‰ååŒç¨‹åºçš„æ–° Python å…³é”®å­— asyncio: Python åŒ…ï¼Œå®ƒä¸ºè¿è¡Œå’Œç®¡ç†ååŒç¨‹åºæä¾›äº†åŸºç¡€å’Œ API ååŒç¨‹åº(ä¸“é—¨çš„ç”Ÿæˆå™¨å‡½æ•°)æ˜¯ Python ä¸­å¼‚æ­¥ IO çš„æ ¸å¿ƒï¼Œç¨åŽæˆ‘ä»¬å°†æ·±å…¥è®¨è®ºå®ƒä»¬ã€‚ å‡†å¤‡å·¥ä½œ å·¥ä½œçŽ¯å¢ƒ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä½¿ç”¨æœ¯è¯­ async IO æ¥è¡¨ç¤ºå¼‚æ­¥ IO çš„è¯­è¨€æ— å…³è®¾è®¡ï¼Œè€Œ asyncio æŒ‡çš„æ˜¯ Python åŒ…ã€‚ ä½ éœ€è¦ Python 3.7æˆ–è€…æ›´é«˜ç‰ˆæœ¬æ¥å®Œæ•´åœ°é˜…è¯»æœ¬æ–‡ï¼Œè¿˜éœ€è¦ aiohttp å’Œ aiofiles åŒ…1234&gt;$ python3.7 -m venv ./py37async&gt;$ source ./py37async/bin/activate#Windows:.\py37async\Scripts\activate.bat&gt;$ pip install --upgrade pip aiohttp aiofiles # Optional: aiodns&gt; åœ¨Async IOå‰ä¸–ä»Šç”ŸAsync IOç”¨åœ¨ä»€ä¹ˆåœ°æ–¹?Async IO æ¯”èµ·å¤šè¿›ç¨‹å’Œçº¿ç¨‹, çŸ¥ååº¦ä¼šæ›´ä½Žä¸€ç‚¹, æ¥ä¸€ç‚¹ä¸€ç‚¹äº†è§£ã€‚ Parallelism(å¹¶è¡Œæ€§): åœ¨åŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªæ“ä½œã€‚Multiprocessing(å¤šè¿›ç¨‹): æ˜¯ä¸€ç§å®žçŽ°Parallelism(å¹¶è¡Œæ€§)çš„æ‰‹æ®µ, å®ƒéœ€è¦åœ¨è®¡ç®—æœºçš„ä¸­å¤®å¤„ç†å•å…ƒ(cpu æˆ–å†…æ ¸)ä¸Šåˆ†é…ä»»åŠ¡ã€‚ å¤šè¿›ç¨‹éžå¸¸é€‚åˆå¤„ç†CPUå¯†é›†åž‹(CPU-bound)çš„ä»»åŠ¡: éžå¸¸ä¾èµ–å¾ªçŽ¯æˆ–è€…æ•°å­¦è®¡ç®—é€šå¸¸å±žäºŽè¿™ä¸€ç±»ã€‚Concurrency(å¹¶å‘æ€§)æ˜¯ä¸€ä¸ªæ¯”å¹¶è¡Œæ€§ç¨å®½æ³›çš„æœ¯è¯­ã€‚ å®ƒè¡¨æ˜Žå¤šä¸ªä»»åŠ¡èƒ½å¤Ÿä»¥é‡å çš„æ–¹å¼è¿è¡Œã€‚ (æœ‰ä¸€ç§è¯´æ³•æ˜¯ï¼Œå¹¶å‘å¹¶ä¸æ„å‘³ç€å¹¶è¡Œã€‚) çº¿ç¨‹æ˜¯ä¸€ç§å¹¶å‘æ‰§è¡Œæ¨¡åž‹ï¼Œå¤šä¸ªçº¿ç¨‹è½®æµæ‰§è¡Œä»»åŠ¡ã€‚ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚ å› ä¸ºå…¨å±€è§£é‡Šå™¨é”(GIL)çš„å…³ç³»ï¼ŒPython ä¸Žçº¿ç¨‹çš„å…³ç³»éžå¸¸å¤æ‚ï¼Œä½†è¿™è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ã€‚ äº†è§£çº¿ç¨‹å¤„ç†çš„é‡è¦æ€§åœ¨äºŽï¼Œå®ƒæ›´é€‚åˆå¤„ç†IOå¯†é›†åž‹(IO-bound)ç›¸å…³çš„ä»»åŠ¡ã€‚ å½“è®¡ç®—æœºå†…æ ¸å·¥ä½œä»Žå¼€å§‹åˆ°ç»“æŸæ—¶ï¼Œä¸»è¦çš„æ¶ˆè€—éƒ½åœ¨è¾“å…¥ / è¾“å‡ºä¸Šé¢ã€‚ æ€»ç»“ä¸€ä¸‹ï¼ŒConcurrency(å¹¶å‘æ€§)åŒ…æ‹¬Multiprocessing(å¤šè¿›ç¨‹)(é€‚åˆå¤„ç†CPUå¯†é›†åž‹çš„ä»»åŠ¡)å’Œthreading(çº¿ç¨‹)(é€‚åˆå¤„ç†IOå¯†é›†åž‹çš„ä»»åŠ¡)ã€‚ Multiprocessing(å¤šè¿›ç¨‹)æ˜¯Parallelism(å¹¶è¡Œæ€§)çš„ä¸€ç§å½¢å¼ï¼ŒParallelism(å¹¶è¡Œæ€§)æ˜¯Concurrency(å¹¶å‘æ€§)çš„ä¸€ç§ç‰¹å®šç±»åž‹(å­é›†)ã€‚ Python multiprocessingã€threading å’Œ concurrent.futuresåŒ… ä¸ºè¿™ä¸¤è€…æä¾›äº†é•¿æœŸçš„æ”¯æŒã€‚ çŽ°åœ¨æ˜¯æ—¶å€™åŠ å…¥ä¸€ä¸ªæ–°æˆå‘˜äº†ã€‚ åœ¨è¿‡åŽ»çš„å‡ å¹´ä¸­ï¼Œä¸€ä¸ªåˆ†ç¦»çš„è®¾è®¡å·²ç»æ›´åŠ å…¨é¢åœ°å†…ç½®åˆ° CPython ä¸­: asynchronous IO(å¼‚æ­¥ IO)ï¼Œé€šè¿‡æ ‡å‡†åº“çš„ asyncio åŒ…å’Œæ–°çš„ async å’Œ await å…³é”®å­—å¯ç”¨ã€‚éœ€è¦æ¾„æ¸…çš„æ˜¯ï¼Œasynchronous IO å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°å‘æ˜Žçš„æ¦‚å¿µï¼Œå®ƒå·²ç»å­˜åœ¨æˆ–è€…æ­£åœ¨è¢«æž„å»ºåˆ°å…¶ä»–è¯­è¨€å’Œè¿è¡Œæ—¶çŽ¯å¢ƒä¸­ï¼Œæ¯”å¦‚ Goã€ C# æˆ–è€… Scalaã€‚ Python æ–‡æ¡£å°† asyncio åŒ…ç§°ä¸ºç¼–å†™å¹¶å‘ä»£ç çš„åº“ã€‚ ä½†æ˜¯ï¼Œå¼‚æ­¥ IO ä¸æ˜¯çº¿ç¨‹ï¼Œä¹Ÿä¸æ˜¯å¤šè¿›ç¨‹ã€‚ å®ƒä¸æ˜¯å»ºç«‹åœ¨è¿™ä¸¤è€…ä¹‹ä¸Šçš„ã€‚ å®žé™…ä¸Šï¼Œasync IO æ˜¯ä¸€ç§å•çº¿ç¨‹ã€å•è¿›ç¨‹çš„è®¾è®¡: å®ƒä½¿ç”¨cooperative multitasking(åä½œå¤šä»»åŠ¡)ï¼Œæœ¬ç¬”è®°ç»“æŸæ—¶ä½ å°†å……å®žè¿™ä¸ªæœ¯è¯­ã€‚ æ¢å¥è¯è¯´ï¼Œå°½ç®¡åœ¨å•ä¸ªè¿›ç¨‹ä¸­ä½¿ç”¨å•ä¸ªçº¿ç¨‹ï¼Œasync IO å¯ä»¥ç»™äººä¸€ç§å¹¶å‘çš„æ„Ÿè§‰ã€‚ ååŒç¨‹åº(async IO çš„ä¸€ä¸ªä¸»è¦ç‰¹æ€§)å¯ä»¥å¹¶å‘è°ƒåº¦ï¼Œä½†å®ƒä»¬æœ¬èº«å¹¶ä¸æ˜¯å¹¶å‘çš„ã€‚ é‡ç”³ä¸€ä¸‹ï¼Œasync IO æ˜¯å¹¶å‘ç¼–ç¨‹çš„ä¸€ç§é£Žæ ¼ï¼Œä½†å®ƒä¸æ˜¯Parallelismã€‚ ä¸ŽMultiprocessingç›¸æ¯”ï¼Œå®ƒæ›´æŽ¥è¿‘äºŽthreadingï¼Œä½†ä¸Žè¿™ä¸¤è€…éžå¸¸ä¸åŒï¼Œæ˜¯å¹¶å‘æŠ€å·§ä¸­çš„ä¸€ä¸ªç‹¬ç«‹æˆå‘˜ã€‚ è¿˜å‰©ä¸‹ä¸€ä¸ªé—®é¢˜, asynchronousæ˜¯ä»€ä¹ˆæ„æ€? è¦æ³¨æ„ä¸‹é¢asynchronous(å¼‚æ­¥)çš„ä»‹ç»å¹¶ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„å®šä¹‰, ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¦‚æ­¤æè¿°: Asynchronous routines(å¼‚æ­¥ä¾‹ç¨‹)å¯ä»¥åœ¨ç­‰å¾…æœ€ç»ˆç»“æžœæ—¶â€œæš‚åœâ€ ï¼ŒåŒæ—¶è®©å…¶ä»–routinesè¿è¡Œ é€šè¿‡ä¸Šè¿°æœºåˆ¶ï¼Œå¼‚æ­¥ä»£ç ä¿ƒè¿›äº†å¹¶å‘æ‰§è¡Œã€‚ æ¢å¥è¯è¯´ï¼Œå¼‚æ­¥ä»£ç ç»™å‡ºäº†å¹¶å‘çš„å¤–è§‚å’Œæ„Ÿè§‰ è¿™é‡Œæœ‰ä¸€ä¸ªå›¾è¡¨æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ã€‚ ç™½è‰²æœ¯è¯­ä»£è¡¨æ¦‚å¿µï¼Œç»¿è‰²æœ¯è¯­ä»£è¡¨å®žæ–½æˆ–ç”Ÿæ•ˆçš„æ–¹å¼ ok, å¯¹äºŽå¹¶å‘ç¼–ç¨‹æ¨¡åž‹ä¹‹é—´çš„æ¯”è¾ƒå…ˆåœæ­¢ã€‚ è¿™ä¸ªç¬”è®°ä¸»è¦å…³æ³¨async IOçš„å­ç»„ä»¶ã€å¦‚ä½•ä½¿ç”¨å®ƒä»¥åŠå›´ç»•å®ƒæ¶ŒçŽ°çš„ apiã€‚ è¦å½»åº•æŽ¢ç´¢threadingä¸Žmultiprocessingç›¸å¯¹äºŽasync IOçš„åŒºåˆ«ï¼Œè¯·æŸ¥çœ‹ Jim Anderson å¯¹ Python ä¸­å¹¶å‘æ€§çš„æ¦‚è¿°: overview of concurrency in Python async IO è§£é‡Š å¼‚æ­¥è¾“å…¥è¾“å‡ºä¸€å¼€å§‹çœ‹èµ·æ¥ä¼¼ä¹Žæ˜¯è¿åç›´è§‰å’ŒçŸ›ç›¾çš„ã€‚ æžå¹¶å‘ä»£ç çš„ä¸œè¥¿å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å’Œä¸€ä¸ª CPU æ ¸å¿ƒï¼Ÿ ä¸‹é¢è¿™ä¸ªä¾‹å­å¾ˆå¥½åœ°è§£é‡Šäº†ä¸€åˆ‡: é™ˆåˆ€ä»”ä¹‹å¾’å¢æœ¬ä¼Ÿä¸¾åŠžäº†ä¸€åœºæ–—åœ°ä¸»äº‰éœ¸èµ›ï¼Œåœ¨è¿™åœºæ¯”èµ›ä¸­ï¼Œä»–å°†ä¸Žå¤šåæ°´å‹æ‰“ç‰Œ, å¹¶å¤ºå¾—èƒœåˆ©ã€‚ ä»–æœ‰ä¸¤ç§æ¯”èµ›çš„æ–¹å¼: åŒæ­¥å’Œå¼‚æ­¥ã€‚ å‡è®¾: 24ä¸ªå¯¹æ‰‹ å¢æœ¬ä¼Ÿåœ¨5ç§’å†…æ‰“å‡º1æ¬¡ç‰Œ æ¯å±€æ¸¸æˆå¹³å‡æ¯äººè¦æ‰“å‡º30æ¬¡ç‰Œ(æ€»å…±ä¸€å±€60æ¬¡) Synchronous version(åŒæ­¥ç‰ˆæœ¬): å¢æœ¬ä¼Ÿ1æ¬¡çŽ©1å±€æ–—åœ°ä¸»ï¼Œæ°¸è¿œä¸è¦åŒæ—¶çŽ©ä¸¤ä¸ªï¼Œç›´åˆ°æ¸¸æˆç»“æŸã€‚ æ¯åœºæ¯”èµ›éœ€æ—¶(55 + 5) * 30==1800ç§’ï¼Œæˆ–è€…è¯´30åˆ†é’Ÿã€‚ æ•´ä¸ªæ¯”èµ›åŽ†æ—¶24 * 30==720åˆ†é’Ÿï¼Œä¹Ÿå°±æ˜¯12å°æ—¶ã€‚ Asynchronous version(å¼‚æ­¥ç‰ˆæœ¬): å¢æœ¬ä¼Ÿä»Žä¸€å¼ æ¯”èµ›æ¡Œç§»åŠ¨åˆ°å¦ä¸€å¼ æ¯”èµ›æ¡Œï¼Œæ¯ä¸ªæ¡Œå­ç§»åŠ¨ä¸€æ¬¡ã€‚ å½“ä»–ç¦»å¼€æ¡Œå­çš„æ—¶å€™ï¼Œè®©æ°´å‹åœ¨ç­‰å¾…æœŸé—´é‡‡å–ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚ 24åœºæ¯”èµ›ä¸­æ¯éåŽ†ä¸€æ¬¡éœ€è¦å¢æœ¬ä¼Ÿ24 * 5==120ç§’ï¼Œæˆ–2åˆ†é’Ÿã€‚ æ•´åœºæ–—åœ°ä¸»äº‰éœ¸èµ›çŽ°åœ¨ç¼©çŸ­åˆ°120 * 30==3600ç§’ï¼Œæˆ–è€…åªæœ‰1ä¸ªå°æ—¶ã€‚ åªæœ‰ä¸€ä½å¢æœ¬ä¼Ÿï¼Œä»–åªæœ‰ä¸€åŒæ‰‹ï¼Œä¸€æ¬¡åªèƒ½ç§»åŠ¨æ‰“ä¸€æ¬¡ç‰Œã€‚ ä½†æ˜¯åœ¨èµ›åœºä¸åœåœ°åˆ‡æ¢æ¯”èµ›åº§, è®©æ—¶é—´ä»Ž12å°æ—¶å‡å°‘åˆ°äº†1å°æ—¶ã€‚ å› æ­¤ï¼Œ cooperative multitasking(ååŒå¤šä»»åŠ¡)æ˜¯ä¸€ç§fancyçš„è¯´æ³•ï¼Œå³ç¨‹åºçš„äº‹ä»¶å¾ªçŽ¯(ç¨åŽå†è¯¦è¿°)ä¸Žå¤šä¸ªä»»åŠ¡é€šä¿¡ï¼Œè®©æ¯ä¸ªä»»åŠ¡åœ¨æœ€ä½³æ—¶é—´è½®æµè¿è¡Œã€‚ Async IO éœ€è¦å¾ˆé•¿çš„ç­‰å¾…æ—¶é—´ï¼Œå¦åˆ™å‡½æ•°ä¼šè¢«é˜»å¡žï¼Œå¹¶å…è®¸å…¶ä»–å‡½æ•°åœ¨åœæœºæœŸé—´è¿è¡Œã€‚ (é˜»å¡žå‡½æ•°æœ‰æ•ˆåœ°é˜»æ­¢å…¶ä»–å‡½æ•°ä»Žå¯åŠ¨åˆ°è¿”å›žçš„æ—¶é—´å†…è¿è¡Œã€‚) asyncio æ¨¡å— å’Œ async/awaitçŽ°åœ¨æ‚¨å·²ç»äº†è§£äº†async IO è®¾è®¡çš„ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼ŒæŽ¥ä¸‹æ¥è®©æˆ‘ä»¬æŽ¢ç´¢ Python çš„å®žçŽ°ã€‚ Python çš„ asyncio åŒ…(åœ¨ Python 3.4ä¸­å¼•å…¥)åŠå…¶ä¸¤ä¸ªå…³é”®å­— async å’Œ await å¯ä»¥è¾¾åˆ°ä¸åŒçš„ç›®çš„ï¼Œä½†æ˜¯å®ƒä»¬ä¸€èµ·å¯ä»¥å¸®åŠ©æ‚¨å£°æ˜Žã€æž„å»ºã€æ‰§è¡Œå’Œç®¡ç†å¼‚æ­¥ä»£ç ã€‚ å…³äºŽ async/await çš„è¯­æ³• å’Œ Native Coroutines(æœ¬åœ°åç¨‹) A Word of Caution: å°å¿ƒä½ åœ¨ç½‘ä¸Šè¯»åˆ°çš„ä¸œè¥¿ã€‚ async IO API å·²ç»ä»Ž Python 3.4è¿…é€Ÿå‘å±•åˆ° Python 3.7ã€‚ ä¸€äº›æ—§çš„æ¨¡å¼å·²ç»ä¸å†ä½¿ç”¨ï¼Œä¸€äº›æœ€åˆè¢«ç¦æ­¢çš„ä¸œè¥¿çŽ°åœ¨å¯ä»¥é€šè¿‡æ–°çš„å¼•å…¥æ¥ä½¿ç”¨ã€‚ æœ¬ç¬”è®°ä¹Ÿå°†å¾ˆå¿«åŠ å…¥è¿‡æ—¶çš„åžƒåœ¾æ¡¶ã€‚ - 2020-1-6 17:52:02 async IO çš„æ ¸å¿ƒæ˜¯ coroutines (ååŒç¨‹åº)ã€‚ coroutines æ˜¯ Python ç”Ÿæˆå™¨å‡½æ•°çš„ç‰¹æ®Šç‰ˆæœ¬ã€‚ è®©æˆ‘ä»¬ä»Žä¸€ä¸ª baseline(åŸºç¡€ç‰ˆæœ¬)å®šä¹‰å¼€å§‹ï¼Œç„¶åŽåœ¨è¿™é‡Œè¿›è¡Œæž„å»º: ååŒç¨‹åºæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥åœ¨åˆ°è¾¾ return ä¹‹å‰æš‚åœæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥é—´æŽ¥åœ°å°†æŽ§åˆ¶æƒä¼ é€’ç»™å¦ä¸€ä¸ª coroutine ä¸€æ®µæ—¶é—´ã€‚ ç¨åŽï¼Œä½ å°†æ›´æ·±å…¥åœ°äº†è§£ä¼ ç»Ÿç”Ÿæˆå™¨åˆ°åº•æ˜¯å¦‚ä½•é‡æ–°ç”¨äºŽååŒç¨‹åºçš„ã€‚ ç›®å‰ï¼Œäº†è§£ååŒç¨‹åºå¦‚ä½•å·¥ä½œçš„æœ€ç®€å•æ–¹æ³•æ˜¯å¼€å§‹åˆ¶ä½œä¸€äº›ååŒç¨‹åºã€‚ asyncio APIä¸‹é¢ä»‹ç» asyncio æ¨¡å—æœ€ä¸»è¦çš„å‡ ä¸ªAPIã€‚æ³¨æ„ï¼Œå¿…é¡»ä½¿ç”¨ Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ—©æœŸçš„è¯­æ³•å·²ç»å˜äº†ã€‚ ç¬¬ä¸€æ­¥ï¼Œimport åŠ è½½ asyncio æ¨¡å—ã€‚ 1import asyncio ç¬¬äºŒæ­¥ï¼Œå‡½æ•°å‰é¢åŠ ä¸Š async å…³é”®å­—ï¼Œå°±å˜æˆäº† async å‡½æ•°ã€‚è¿™ç§å‡½æ•°æœ€å¤§ç‰¹ç‚¹æ˜¯æ‰§è¡Œå¯ä»¥æš‚åœï¼Œäº¤å‡ºæ‰§è¡Œæƒã€‚ 12&gt; async def main():&gt; ç¬¬ä¸‰æ­¥ï¼Œåœ¨ async å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥ä»»åŠ¡å‰é¢ï¼ŒåŠ ä¸Šawaitå‘½ä»¤ã€‚ 12&gt; await asyncio.sleep(1)&gt; ä¸Šé¢ä»£ç ä¸­ï¼Œasyncio.sleep(1) æ–¹æ³•å¯ä»¥ç”Ÿæˆä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä¼‘çœ 1ç§’é’Ÿç„¶åŽç»“æŸã€‚ æ‰§è¡Œå¼•æ“Žé‡åˆ°awaitå‘½ä»¤ï¼Œå°±ä¼šåœ¨å¼‚æ­¥ä»»åŠ¡å¼€å§‹æ‰§è¡Œä¹‹åŽï¼Œæš‚åœå½“å‰ async å‡½æ•°çš„æ‰§è¡Œï¼ŒæŠŠæ‰§è¡Œæƒäº¤ç»™å…¶ä»–ä»»åŠ¡ã€‚ç­‰åˆ°å¼‚æ­¥ä»»åŠ¡ç»“æŸï¼Œå†æŠŠæ‰§è¡Œæƒäº¤å›ž async å‡½æ•°ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚ ç¬¬å››æ­¥ï¼Œasync.run() æ–¹æ³•åŠ è½½ async å‡½æ•°ï¼Œå¯åŠ¨äº‹ä»¶å¾ªçŽ¯ã€‚ 12&gt; asyncio.run(main())&gt; ä¸Šé¢ä»£ç ä¸­ï¼Œasyncio.run() åœ¨äº‹ä»¶å¾ªçŽ¯ä¸Šç›‘å¬ async å‡½æ•°mainçš„æ‰§è¡Œã€‚ç­‰åˆ° main æ‰§è¡Œå®Œäº†ï¼Œäº‹ä»¶å¾ªçŽ¯æ‰ä¼šç»ˆæ­¢ã€‚ asyncio æ¨¡å—åœ¨å•çº¿ç¨‹ä¸Šå¯åŠ¨ä¸€ä¸ªäº‹ä»¶å¾ªçŽ¯ï¼ˆevent loopï¼‰ï¼Œæ—¶åˆ»ç›‘å¬æ–°è¿›å…¥å¾ªçŽ¯çš„äº‹ä»¶ï¼ŒåŠ ä»¥å¤„ç†ï¼Œå¹¶ä¸æ–­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°å¼‚æ­¥ä»»åŠ¡ç»“æŸã€‚äº‹ä»¶å¾ªçŽ¯çš„å†…éƒ¨æœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒ JavaScript çš„æ¨¡åž‹ï¼Œä¸¤è€…æ˜¯ä¸€æ ·çš„ã€‚ async å‡½æ•°ç¤ºä¾‹ è®©æˆ‘ä»¬é‡‡ç”¨æµ¸å…¥å¼æ–¹æ³•ç¼–å†™ä¸€äº›å¼‚æ­¥ IO ä»£ç ã€‚ è¿™ä¸ªç®€çŸ­çš„ç¨‹åºæ˜¯ async IO çš„ Hello Worldï¼Œä½†æ˜¯åœ¨è¯´æ˜Žå…¶æ ¸å¿ƒåŠŸèƒ½æ–¹é¢è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°: 12345678910111213141516171819#!/usr/bin/env python3# count_async.pyimport asyncioasync def count(): print("One") await asyncio.sleep(1) print("Two")async def main(): await asyncio.gather(count(), count(), count())if __name__ == "__main__": import time s = time.perf_counter() asyncio.run(main()) elapsed = time.perf_counter() - s print(f"&#123;__file__&#125; executed in &#123;elapsed:0.2f&#125; seconds.") ä¸Šé¢è„šæœ¬ä¸­ï¼Œåœ¨ async å‡½æ•°mainçš„é‡Œé¢ï¼Œasyncio.gather() æ–¹æ³•å°†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆä¸‰ä¸ª count()ï¼‰åŒ…è£…æˆä¸€ä¸ªæ–°çš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨çš„å¤šä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡Œç»“æŸï¼Œè¿™ä¸ªæ–°çš„å¼‚æ­¥ä»»åŠ¡æ‰ä¼šç»“æŸã€‚ è„šæœ¬çš„è¿è¡Œç»“æžœå¦‚ä¸‹ã€‚ 12345678$ python3 count_async.pyOneOneOneTwoTwoTwocount_async.py executed in 1.01 seconds. ä¸Šé¢è¿è¡Œç»“æžœçš„åŽŸå› æ˜¯ï¼Œä¸‰ä¸ª count() ä¾æ¬¡æ‰§è¡Œï¼Œæ‰“å°å®Œ Oneï¼Œå°±ä¼‘çœ 1ç§’é’Ÿï¼ŒæŠŠæ‰§è¡Œæƒäº¤ç»™ä¸‹ä¸€ä¸ª count()ï¼Œæ‰€ä»¥å…ˆè¿žç»­æ‰“å°å‡ºä¸‰ä¸ª Oneã€‚ç­‰åˆ°1ç§’é’Ÿä¼‘çœ ç»“æŸï¼Œæ‰§è¡Œæƒé‡æ–°äº¤å›žç¬¬ä¸€ä¸ª count()ï¼Œå¼€å§‹æ‰§è¡Œ await å‘½ä»¤ä¸‹ä¸€è¡Œçš„è¯­å¥ï¼Œæ‰€ä»¥ä¼šæŽ¥ç€æ‰“å°å‡ºä¸‰ä¸ªTwoã€‚è„šæœ¬æ€»çš„è¿è¡Œæ—¶é—´æ˜¯1ç§’ã€‚ è¿™ä¸ªè¾“å‡ºçš„é¡ºåºæ˜¯å¼‚æ­¥ IO çš„æ ¸å¿ƒã€‚ å¯¹ count ()çš„æ¯ä¸ªè°ƒç”¨è¿›è¡Œé€šä¿¡æ˜¯å•ä¸ªäº‹ä»¶å¾ªçŽ¯æˆ–åè°ƒå™¨ã€‚ å½“æ¯ä¸ªä»»åŠ¡åˆ°è¾¾å¹¶ç­‰å¾… asyncio.sleep (1)æ—¶ï¼Œè¯¥å‡½æ•°å¯¹äº‹ä»¶å¾ªçŽ¯å¤§å–Šï¼Œå¹¶å°†æŽ§åˆ¶æƒäº¤è¿˜ç»™å®ƒï¼Œå®ƒè¯´: â€œæˆ‘è¦ç¡ä¸€ç§’é’Ÿã€‚ åœ¨æ­¤æœŸé—´ï¼Œç»§ç»­åšä¸€äº›æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚â€ ä½œä¸ºå¯¹æ¯”ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªä¾‹å­çš„åŒæ­¥ç‰ˆæœ¬ synchronous.pyã€‚ 12345678910111213141516171819#!/usr/bin/env python3# count_synchronous.pyimport timedef count(): print("One") time.sleep(1) print("Two")def main(): for _ in range(3): count()if __name__ == "__main__": s = time.perf_counter() main() elapsed = time.perf_counter() - s print(f"&#123;__file__&#125; executed in &#123;elapsed:0.2f&#125; seconds.") æ‰§è¡Œæ—¶ï¼Œé¡ºåºå’Œæ‰§è¡Œæ—¶é—´ä¼šæœ‰ä¸€ä¸ªç»†å¾®ä½†å…³é”®çš„å˜åŒ–: 12345678$ python3 count_synchronous.pyOneTwoOneTwoOneTwocount_synchronous.py executed in 3.01 seconds. è™½ç„¶ä½¿ç”¨ time.sleep ()å’Œ asyncio.sleep ()å¯èƒ½çœ‹èµ·æ¥å¾ˆè€å¥—ï¼Œä½†å®ƒä»¬è¢«ç”¨ä½œä»»ä½•æ¶‰åŠç­‰å¾…æ—¶é—´çš„æ—¶é—´å¯†é›†åž‹è¿›ç¨‹çš„æ›¿ä»£å“ã€‚ (ä½ å¯ä»¥ç­‰å¾…çš„æœ€å¹³å‡¡çš„äº‹æƒ…å°±æ˜¯ä¸€ä¸ªåŸºæœ¬ä¸Šä»€ä¹ˆéƒ½ä¸åšçš„ç¡çœ è°ƒç”¨ã€‚) ä¹Ÿå°±æ˜¯è¯´ï¼Œtime.sleep ()å¯ä»¥è¡¨ç¤ºä»»ä½•è€—æ—¶çš„é˜»å¡žå‡½æ•°è°ƒç”¨ï¼Œè€Œ asyncio.sleep ()ç”¨äºŽä»£æ›¿éžé˜»å¡žè°ƒç”¨(ä½†ä¹Ÿéœ€è¦ä¸€äº›æ—¶é—´æ‰èƒ½å®Œæˆ)ã€‚ æ­£å¦‚ä½ å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­çœ‹åˆ°çš„ï¼Œç­‰å¾…åŒ…æ‹¬ asyncio.sleep ()åœ¨å†…çš„å†…å®¹çš„å¥½å¤„æ˜¯ï¼Œå‘¨å›´çš„å‡½æ•°å¯ä»¥æš‚æ—¶å°†æŽ§åˆ¶æƒäº¤ç»™å¦ä¸€ä¸ªæ›´å®¹æ˜“ç«‹å³æ‰§è¡ŒæŸäº›æ“ä½œçš„å‡½æ•°ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œtime.sleep ()æˆ–ä»»ä½•å…¶ä»–é˜»å¡žè°ƒç”¨éƒ½ä¸Žå¼‚æ­¥ Python ä»£ç ä¸å…¼å®¹ï¼Œå› ä¸ºå®ƒä¼šåœ¨ä¼‘çœ æœŸé—´åœæ­¢ä¸€åˆ‡ã€‚ Async IOçš„è§„åˆ™åœ¨è¿™é‡Œ, ä¸€ä¸ªå…³äºŽ async, await, å’Œcoroutine functions çš„æ›´åŠ æ­£å¼çš„å®šä¹‰æ˜¯å®ƒä»¬åœ¨åˆ›å»ºçš„æ—¶å€™æ˜¯æœ‰åºçš„ è¯­æ³• async def å¼•å…¥äº†ä¸€ä¸ª native coroutine(æœ¬åœ°åç¨‹) æˆ–è€…è¯´ä¸€ä¸ª asynchronous generator(å¼‚æ­¥ç”Ÿæˆå™¨) , è€Œè¡¨è¾¾å¼ async with å’Œ async for ä¹Ÿæ˜¯åˆæ³•çš„, ç¨åŽä½ ä¼šçœ‹åˆ°å®ƒä»¬ å…³é”®å­— await å°†å‡½æ•°æŽ§åˆ¶ä¼ é€’å›ž event loop(äº‹ä»¶å¾ªçŽ¯)ã€‚ (å®ƒæš‚åœæ‰§è¡Œå‘¨å›´çš„ååŒç¨‹åºã€‚) å¦‚æžœ Python é‡åˆ° g ()èŒƒå›´å†…çš„ await f ()è¡¨è¾¾å¼ï¼Œè¿™å°±æ˜¯ await å‘Šè¯‰äº‹ä»¶å¾ªçŽ¯ï¼Œâ€œæš‚åœ g ()çš„æ‰§è¡Œï¼Œç›´åˆ°è¿”å›žæˆ‘æ­£åœ¨ç­‰å¾…çš„ f ()çš„ç»“æžœã€‚ ä¸Žæ­¤åŒæ—¶ï¼Œè®©å…¶å®ƒéƒ¨åˆ†ä¾æ—§è¿è¡Œã€‚â€ åœ¨ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ªè¦ç‚¹çœ‹èµ·æ¥å¤§è‡´å¦‚ä¸‹: 1234async def g(): # Pause here and come back to g() when f() is ready r = await f() return r å¯¹äºŽä½•æ—¶ä»¥åŠå¦‚ä½•ä½¿ç”¨ async / awaitï¼Œè¿˜æœ‰ä¸€å¥—ä¸¥æ ¼çš„è§„åˆ™ã€‚ æ— è®ºä½ æ˜¯å¦è¿˜åœ¨å­¦ä¹ è¯­æ³•ï¼Œæˆ–è€…å·²ç»æŽ¥è§¦è¿‡ä½¿ç”¨ async / awaitï¼Œè¿™äº›æ–¹æ³•éƒ½å¾ˆæ–¹ä¾¿: ä½¿ç”¨ async def å¼•å…¥çš„å‡½æ•°æ˜¯ coroutineã€‚ å®ƒå¯ä»¥ä½¿ç”¨await, return, æˆ–è€… yieldï¼Œä½†æ‰€æœ‰è¿™äº›éƒ½æ˜¯å¯é€‰çš„ã€‚ å£°æ˜Ž async def noop () : pass æ˜¯åˆæ³•çš„: ä½¿ç”¨ await and/or return åˆ›å»ºä¸€ä¸ª coroutine å‡½æ•°ã€‚ è¦è°ƒç”¨ååŒç¨‹åºå‡½æ•°ï¼Œå¿…é¡» await å®ƒåŽ»èŽ·å–å®ƒçš„ç»“æžœã€‚ åœ¨ async def å—ä¸­ä½¿ç”¨ yield ä¸å¤ªå¸¸è§(è€Œä¸”æœ€è¿‘åœ¨ Python ä¸­æ‰æ˜¯åˆæ³•çš„)ã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªå¼‚æ­¥ç”Ÿæˆå™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ async for å¯¹å…¶è¿›è¡Œè¿­ä»£ã€‚ æš‚æ—¶å¿˜è®°å¼‚æ­¥ç”Ÿæˆå™¨ï¼Œä¸“æ³¨äºŽè®¤çœŸå¯¹å¾… coroutine å‡½æ•°çš„è¯­æ³•ï¼Œè¿™äº›å‡½æ•°ä½¿ç”¨ await and/or returnã€‚ ä»»ä½•ä½¿ç”¨ async def å®šä¹‰çš„å†…å®¹éƒ½ä¸èƒ½ä½¿ç”¨ yield fromï¼Œè¿™å°†å¼•å‘ SyntaxError é”™è¯¯ã€‚ å°±åƒåœ¨ def å‡½æ•°ä¹‹å¤–ä½¿ç”¨ yield æ˜¯ SyntaxError ä¸€æ ·ï¼Œåœ¨ async def coroutine ä¹‹å¤–ä½¿ç”¨ await ä¹Ÿæ˜¯ SyntaxError ã€‚ ä½ åªèƒ½åœ¨ååŒç¨‹åºçš„ä¸»ä½“(body)ä¸­ä½¿ç”¨ await ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›ç®€çŸ­çš„ä¾‹å­ï¼Œæ—¨åœ¨æ€»ç»“ä¸Šè¿°å‡ æ¡è§„åˆ™: 12345678910111213async def f(x): y = await z(x) # OK - `await` and `return` allowed in coroutines return yasync def g(x): yield x # OK - this is an async generatorasync def m(x): yield from gen(x) # No - SyntaxErrordef m(x): y = await z(x) # Still no - SyntaxError (no `async def` here) return y æœ€åŽ, å½“ä½ ä½¿ç”¨ await f()çš„æ—¶å€™, f()å¿…é¡»æ˜¯ä¸€ä¸ª awaitable çš„å¯¹è±¡.å•¥? è¿™æ²¡ä»€ä¹ˆåµç”¨?çŽ°åœ¨ä½ åªéœ€çŸ¥é“ä¸€ä¸ªawaitableçš„å¯¹è±¡å¿…é¡»æ˜¯(1)å¦ä¸€ä¸ªcoroutine, æˆ–è€…æ˜¯(2)ä¸€ä¸ªå®šä¹‰äº† .__await__()dunderæ–¹æ³•è€Œä¸”è¿”å›žä¸€ä¸ªè¿­ä»£å™¨çš„å¯¹è±¡ã€‚å¦‚æžœæ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå¯¹äºŽå¤§å¤šæ•°ç›®çš„æ¥è¯´ï¼Œæ‚¨åªéœ€è¦æ‹…å¿ƒ(1)ç±»æƒ…å†µã€‚ è¿™åˆç»™æˆ‘ä»¬å¸¦æ¥äº†å¦ä¸€ä¸ªæŠ€æœ¯ä¸Šçš„åŒºåˆ«ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°å®ƒçš„å¼¹å‡º: å°†å‡½æ•°æ ‡è®°ä¸º coroutine çš„ä¸€ç§è¾ƒè€çš„æ–¹æ³•æ˜¯ä½¿ç”¨@asyncio æ¥è£…é¥°ä¸€ä¸ªæ™®é€šçš„ def å‡½æ•°ã€‚ ååŒä½œç”¨ã€‚ ç»“æžœæ˜¯ä¸€ä¸ªåŸºäºŽç”Ÿæˆå™¨çš„ååŒç¨‹åº( generator-based coroutine )ã€‚ ç”±äºŽåœ¨ Python 3.5ä¸­ä½¿ç”¨äº† async / await è¯­æ³•ï¼Œè¿™ç§ç»“æž„å·²ç»è¿‡æ—¶ã€‚ è¿™ä¸¤ä¸ª åç¨‹ åŸºæœ¬ä¸Šæ˜¯ç­‰ä»·çš„(ä¸¤è€…éƒ½æ˜¯ awaitable ) ï¼Œä½†ç¬¬ä¸€ä¸ªåç¨‹æ˜¯åŸºäºŽç”Ÿæˆå™¨çš„( generator-based )ï¼Œè€Œç¬¬äºŒä¸ªåç¨‹æ˜¯æœ¬åœ°ååŒç¨‹åº(native coroutine): 12345678910import asyncio@asyncio.coroutinedef py34_coro(): """Generator-based coroutine, older syntax""" yield from stuff()async def py35_coro(): """Native coroutine, modern syntax""" await stuff() å¦‚æžœæ‚¨è‡ªå·±ç¼–å†™ä»»ä½•ä»£ç ï¼Œä¸ºäº†æ˜¾å¼è€Œä¸æ˜¯éšå¼( explicit rather than implicit )ï¼Œè¯·é€‰æ‹© native coroutinesã€‚ åŸºäºŽç”Ÿæˆå™¨çš„åç¨‹å°†åœ¨ Python 3.10ä¸­åˆ é™¤( removed)ã€‚ åœ¨æœ¬ç¬”è®°çš„åŽåŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä»…ä»…ä¸ºäº†è§£é‡Šè€Œæ¶‰åŠä¸€ç‚¹ç‚¹åŸºäºŽç”Ÿæˆå™¨çš„åç¨‹ã€‚ ä¹‹æ‰€ä»¥å¼•å…¥ async / awaitï¼Œæ˜¯ä¸ºäº†ä½¿ååŒç¨‹åºæˆä¸º Python çš„ä¸€ä¸ªç‹¬ç«‹ç‰¹æ€§ï¼Œå¯ä»¥è½»æ¾åœ°å°†å…¶ä¸Žæ™®é€šçš„ç”Ÿæˆå™¨å‡½æ•°åŒºåˆ†å¼€æ¥ï¼Œä»Žè€Œå‡å°‘æ¨¡ç³Šæ€§ã€‚ ä¸è¦é™·å…¥åŸºäºŽç”Ÿæˆå™¨çš„ååŒç¨‹åºï¼Œè¿™äº›ååŒç¨‹åºå·²ç»è¢« async / await æ•…æ„è¿‡æ—¶( deliberately outdated )äº†ã€‚ å®ƒä»¬æœ‰è‡ªå·±çš„å°è§„åˆ™é›†(ä¾‹å¦‚ï¼Œawait ä¸èƒ½ç”¨äºŽåŸºäºŽç”Ÿæˆå™¨çš„ååŒç¨‹åº) ï¼Œå¦‚æžœåšæŒä½¿ç”¨ async / await è¯­æ³•ï¼Œé‚£ä¹ˆè¿™äº›è§„åˆ™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä¸ç›¸å…³çš„ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€äº›æ›´å¤æ‚çš„æ —å­ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå…³äºŽ async IO å¦‚ä½•å‡å°‘ç­‰å¾…æ—¶é—´çš„æ —å­: ç»™å®šä¸€ä¸ª coroutine, ç»´æŒ(maintain)ä¸€ä¸ªæŒç»­äº§ç”Ÿåœ¨range[0, 10]ä¹‹é—´éšæœºæ•´æ•°çš„ makerandom() å‡½æ•°, ç›´åˆ°å…¶ä¸­ä¸€ä¸ªè¶…è¿‡é˜ˆå€¼(threshold)ä¸ºæ­¢ ã€‚ ä½ å¸Œæœ›è®©è¿™ä¸ª coroutine çš„å¤šä¸ªè°ƒç”¨ä¸éœ€è¦ç›¸äº’ç­‰å¾…è¿žç»­åœ°å®Œæˆã€‚ æ‚¨å¯ä»¥åŸºæœ¬ä¸Šéµå¾ªä¸Šé¢ä¸¤ä¸ªè„šæœ¬ä¸­çš„æ¨¡å¼ï¼Œåªéœ€ç¨ä½œä¿®æ”¹: 123456789101112131415161718192021222324252627282930313233#!/usr/bin/env python3# rand.pyimport asyncioimport random# ANSI colorsc = ( "\033[0m", # End of color "\033[36m", # Cyan "\033[91m", # Red "\033[35m", # Magenta)async def makerandom(idx: int, threshold: int = 6) -&gt; int: print(c[idx + 1] + f"Initiated makerandom(&#123;idx&#125;).") i = random.randint(0, 10) while i &lt;= threshold: print(c[idx + 1] + f"makerandom(&#123;idx&#125;) == &#123;i&#125; too low; retrying.") await asyncio.sleep(idx + 1) i = random.randint(0, 10) print(c[idx + 1] + f"---&gt; Finished: makerandom(&#123;idx&#125;) == &#123;i&#125;" + c[0]) return iasync def main(): res = await asyncio.gather(*(makerandom(i, 10 - i - 1) for i in range(3))) return resif __name__ == "__main__": random.seed(444) r1, r2, r3 = asyncio.run(main()) print() print(f"r1: &#123;r1&#125;, r2: &#123;r2&#125;, r3: &#123;r3&#125;") å½©è‰²è¾“å‡ºæ¯”æˆ‘èƒ½è¯´çš„è¦å¤šå¾—å¤šï¼Œå¹¶ä¸”è®©ä½ äº†è§£è¿™ä¸ªè„šæœ¬æ˜¯å¦‚ä½•æ‰§è¡Œçš„: è¿™ä¸ªç¨‹åºä½¿ç”¨ä¸€ä¸ªmain coroutineï¼Œmakerandom () ï¼Œå¹¶ä¸”åœ¨3ä¸ªä¸åŒçš„è¾“å…¥ç«¯å¹¶å‘åœ°è¿è¡Œå®ƒã€‚ å¤§å¤šæ•°ç¨‹åºå°†åŒ…å«å°çš„ã€æ¨¡å—åŒ–çš„åç¨‹å’Œä¸€ä¸ªå°†æ¯ä¸ªè¾ƒå°çš„åç¨‹æ•´åˆåœ¨ä¸€èµ·çš„ wrapperå‡½æ•°ã€‚ ç„¶åŽä½¿ç”¨ main ()é€šè¿‡åœ¨ä¸€äº›è¿­ä»£å™¨æˆ–æ± (pool)ä¹‹é—´æ˜ å°„åˆ°central coroutineæ¥æ”¶é›†ä»»åŠ¡(futures)ã€‚ åœ¨è¿™ä¸ªå°æ —å­ä¸­ï¼Œæ± (pool)æ˜¯range (3)ã€‚ åœ¨åŽé¢æä¾›çš„ä¸€ä¸ªæ›´å®Œæ•´çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒæ˜¯ä¸€ç»„éœ€è¦è¢«è¯·æ±‚ã€è§£æžå’Œå¹¶å‘å¤„ç†çš„ URLï¼Œè€Œmain ()å°è£…äº†æ¯ä¸ª URL çš„æ•´ä¸ªä¾‹ç¨‹(routine)ã€‚ è™½ç„¶â€œç”Ÿæˆéšæœºæ•´æ•°â€(æ¯”å…¶ä»–ä»»ä½•æ–¹æ³•éƒ½è¦ CPU-bound )å¯èƒ½ä¸æ˜¯ asyncio çš„æœ€ä½³é€‰æ‹©ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œasyncio.sleep ()çš„å‡ºçŽ°æ˜¯ä¸ºäº†æ¨¡æ‹Ÿ IO-bound çš„è¿›ç¨‹ï¼Œå…¶ä¸­æ¶‰åŠä¸ç¡®å®šçš„ç­‰å¾…æ—¶é—´ã€‚ ä¾‹å¦‚ï¼Œasyncio.sleep ()è°ƒç”¨å¯èƒ½è¡¨ç¤ºåœ¨æ¶ˆæ¯åº”ç”¨ç¨‹åºä¸­çš„ä¸¤ä¸ªå®¢æˆ·æœºä¹‹é—´å‘é€å’ŒæŽ¥æ”¶éžéšæœºæ•´æ•°ã€‚ Async IO è®¾è®¡æ¨¡å¼ Async IO æä¾›äº†è‡ªå·±çš„ä¸€ç»„å¯èƒ½çš„è„šæœ¬è®¾è®¡ï¼Œæœ¬èŠ‚å°†ä»‹ç»è¿™äº›è®¾è®¡ã€‚ Chaining Coroutinesåç¨‹çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯å®ƒä»¬å¯ä»¥é“¾æŽ¥åœ¨ä¸€èµ·ã€‚ (è®°ä½ï¼Œä¸€ä¸ªååŒç¨‹åºå¯¹è±¡æ˜¯å¯ä»¥è¢«å”¤é†’çš„( awaitable )ï¼Œæ‰€ä»¥å¦ä¸€ä¸ªååŒç¨‹åºå¯ä»¥ç­‰å¾… (await) å®ƒã€‚) è¿™æ ·ä½ å°±å¯ä»¥æŠŠç¨‹åºåˆ†è§£æˆæ›´å°çš„ã€å¯ç®¡ç†çš„ã€å¯å›žæ”¶çš„ååŒç¨‹åº: 1234567891011121314151617181920212223242526272829303132333435363738394041#!/usr/bin/env python3# chained.pyimport asyncioimport randomimport timeasync def part1(n: int) -&gt; str: i = random.randint(0, 10) print(f"part1(&#123;n&#125;) sleeping for &#123;i&#125; seconds.") await asyncio.sleep(i) result = f"result&#123;n&#125;-1" print(f"Returning part1(&#123;n&#125;) == &#123;result&#125;.") return resultasync def part2(n: int, arg: str) -&gt; str: i = random.randint(0, 10) print(f"part2&#123;n, arg&#125; sleeping for &#123;i&#125; seconds.") await asyncio.sleep(i) result = f"result&#123;n&#125;-2 derived from &#123;arg&#125;" print(f"Returning part2&#123;n, arg&#125; == &#123;result&#125;.") return resultasync def chain(n: int) -&gt; None: start = time.perf_counter() p1 = await part1(n) p2 = await part2(n, p1) end = time.perf_counter() - start print(f"--&gt;Chained result&#123;n&#125; =&gt; &#123;p2&#125; (took &#123;end:0.2f&#125; seconds).")async def main(*args): await asyncio.gather(*(chain(n) for n in args))if __name__ == "__main__": import sys random.seed(444) args = [1, 2, 3] if len(sys.argv) == 1 else map(int, sys.argv[1:]) start = time.perf_counter() asyncio.run(main(*args)) end = time.perf_counter() - start print(f"Program finished in &#123;end:0.2f&#125; seconds.") è¯·ä»”ç»†å…³æ³¨è¾“å‡ºï¼Œå…¶ä¸­ part1() ç¡çœ æ—¶é—´å¯å˜ï¼Œ part2() å¼€å§‹å¤„ç†å¯ç”¨çš„ç»“æžœ: 1234567891011121314151617$ python3 chained.py 9 6 3part1(9) sleeping for 4 seconds.part1(6) sleeping for 4 seconds.part1(3) sleeping for 0 seconds.Returning part1(3) == result3-1.part2(3, 'result3-1') sleeping for 4 seconds.Returning part1(9) == result9-1.part2(9, 'result9-1') sleeping for 7 seconds.Returning part1(6) == result6-1.part2(6, 'result6-1') sleeping for 4 seconds.Returning part2(3, 'result3-1') == result3-2 derived from result3-1.--&gt;Chained result3 =&gt; result3-2 derived from result3-1 (took 4.00 seconds).Returning part2(6, 'result6-1') == result6-2 derived from result6-1.--&gt;Chained result6 =&gt; result6-2 derived from result6-1 (took 8.01 seconds).Returning part2(9, 'result9-1') == result9-2 derived from result9-1.--&gt;Chained result9 =&gt; result9-2 derived from result9-1 (took 11.01 seconds).Program finished in 11.01 seconds. åœ¨è¿™ç§è®¾ç½®ä¸­ï¼Œmain()çš„è¿è¡Œæ—¶é—´ç­‰äºŽå®ƒæ”¶é›†å¹¶è°ƒåº¦çš„ä»»åŠ¡çš„æœ€å¤§è¿è¡Œæ—¶é—´ References Async IO in Python: A Complete Walkthrough Overview of Concurrency in Python]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ArrayList Excecises]]></title>
    <url>%2F2020%2F01%2F04%2Farray-excecises%2F</url>
    <content type="text"><![CDATA[æ”¶é›†pythonåˆ—è¡¨ç›¸å…³çš„é¢˜ç›® Ex: è®¡ç®—ç´ æ•°(è´¨æ•°)è®¾è®¡ä¸€ä¸ªè®¡ç®—ç´ æ•°çš„å‡½æ•° prime(n), ç´ æ•°çš„ä¸ªæ•°å°äºŽç­‰äºŽn, ä¸¾ä¸ªæ —å­: prime(17)=7, å› ä¸ºå‰7ä¸ªç´ æ•°ä¸º2, 3, 5, 7, 11, 13, 17 12345678910111213141516171819202122''' è®¡ç®—ç´ æ•° (1) æ—¶é—´å¤æ‚åº¦: O(n^2), å¯¹äºŽnä¸ªæ•°å­—ä¸­çš„æ¯ä¸€ä¸ªéƒ½è¦éåŽ†1åˆ°æ ¹å·n ç©ºé—´å¤æ‚åº¦: O(1) ''' import math def prime(number): n = 0 for i in range(2, int(math.sqrt(number)) + 1): if number % i == 0: n += 1 if n == 0: return True return Falseprime_nums = [] for i in range(20): if prime(i): prime_nums.append(i) print(len(prime_nums))print(prime_nums) 12345678910111213141516171819202122232425262728'''è®¡ç®—ç´ æ•° (2): ç”¨ç©ºé—´æ¢æ—¶é—´ æ—¶é—´å¤æ‚åº¦: O(n), åªéœ€è¦éåŽ†ä¸€éæ•°ç»„ ç©ºé—´å¤æ‚åº¦: O(2n) tips: ifåˆ¤æ–­æ˜¯éžå¸¸å¿«çš„, æ¯”æ ¹å·nå¿«å¤šäº†'''def count_prime(n): is_prime = [True] * (n + 1) # é¦–å…ˆå‡è®¾1åˆ°nä¸­çš„æ‰€æœ‰æ•°éƒ½æ˜¯è´¨æ•°, ä¸ºTrue i = 2 while (i * i &lt;= n): # éåŽ†, å½“ i**2 &lt; n çš„æ—¶å€™, if (is_prime[i]): # å…ˆåˆ¤æ–­ i æ˜¯å¦ä¸ºç´ æ•° j = i # æ˜¯çš„è¯, æŠŠièµ‹å€¼ç»™j while (j * i &lt;= n): # å½“ j * i &lt;= n æ—¶, is_prime[i * j] = False # æŠŠ i çš„å€æ•°çš„æ•°è®¾ç½®ä¸ºFalse, å› ä¸ºå·²ç»æœ‰ i è¿™ä¸ªå› æ•°äº† j += 1 # jè‡ªå¢ž, æŠŠiçš„æ‰€æœ‰å€æ•°éƒ½è®¾ä¸ºéžè´¨æ•° i += 1 # iè‡ªå¢ž # ç»Ÿè®¡ç´ æ•°ä¸ªæ•° count = 0 for i in range(2, n+1): if (is_prime[i]): count += 1 print(i, end = " ") return count# è®¡ç®—ä»Žä»Ž1åˆ°100èŒƒå›´å†…çš„ç´ æ•°ä¸ªæ•° count_prime(100) Ex: éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³1742å¹´, å“¥å¾·å·´èµ«æå‡ºäº†è‘—åçš„å“¥å¾·å·´èµ«çŒœæƒ³. å³: ä»»ä¸€å¤§äºŽ2çš„å¶æ•°éƒ½å¯ä»¥å†™æˆä¸¤ä¸ªè´¨æ•°ä¹‹å’Œ. æ¯”å¦‚è¯´16=3+13. è¯•ç€ç¼–ç å‡ºç¨‹åº: åªåŒ…å«nä½œä¸ºå‚æ•°, å¹¶ä¸”ç»™å‡ºnä¸ºä¸¤ä¸ªè´¨æ•°ä¹‹å’Œçš„è¡¨è¾¾å¼. å“¥å¾·å·´èµ«çŒœæƒ³è‡³ä»Šæ²¡æœ‰è¢«è¯æ˜Ž, ä½†æ˜¯ç›®å‰å·²çŸ¥å…¶åœ¨n&lt;10^14çš„æ—¶å€™éƒ½æ˜¯æˆç«‹çš„. 12345678910111213141516171819202122232425262728293031323334'''éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³'''import mathimport time# åˆ¤æ–­ç´ æ•°def check(num): for i in range(2, int(math.sqrt(num)+1)): if num % i == 0: return False return Truestart = time.time() flag = 0 # åˆå§‹åŒ–æ ‡å¿—ä½ for i in range(2, 50001): test_num = i*2 for j in range(2, test_num-2): if check(j) and check(test_num-j): # print(test_num, "æ»¡è¶³å“¥å¾·å·´èµ«çŒœæƒ³") flag = 1 break else: flag = 0 if j == test_num-2: print(test_num, "ä¸æ»¡è¶³å“¥å¾·å·´èµ«çŒœæƒ³")if flag == 1: print("åœ¨æ•°å­—2~100000ä¹‹é—´ï¼Œå“¥å¾·å·´èµ«çŒœæƒ³æˆç«‹")end = time.time() res = end - startprint(res) Ex: æ‰«é›·æ¸¸æˆæˆ‘ä»¬æ¥å†™ä¸€ä¸ªå°ç¨‹åºï¼š ç¨‹åºæŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼ŒMï¼ŒNå’Œpï¼Œç„¶åŽç”Ÿæˆä¸€ä¸ªM * Nçš„çŸ©é˜µï¼Œç„¶åŽæ¯ä¸€ä¸ªcell(å°æ ¼å­)æœ‰pçš„æ¦‚çŽ‡æ˜¯åœ°é›·ã€‚ç”ŸæˆçŸ©é˜µåŽï¼Œå†è®¡ç®—å‡ºæ¯ä¸€ä¸ªcellå‘¨å›´åœ°é›·çš„æ•°é‡ã€‚ ä»£ç å®žçŽ° 1234567891011121314151617181920212223242526272829303132333435363738import random# å®šä¹‰ç”Ÿæˆæ£‹ç›˜å‡½æ•°def sweeper(m, n, p): # tips: ç”Ÿæˆm+2&amp;n+2çš„åˆå§‹æ£‹ç›˜æ¥é¿å…è¾¹ç•Œåˆ¤æ–­, -1ä»£è¡¨é›· board = [[None] * (n + 2) for i in range(m + 2)] for i in range(1, m + 1): for j in range(1, n + 1): r = random.random() board[i][j] = -1 if r &lt; p else 0 # ç»˜åˆ¶æ£‹ç›˜ for i in range(1, m + 1): for j in range(1, n + 1): print("*", end=" ") if board[i][j] == -1 else print(".", end=" ") print() # è®¡ç®—æ¯ä¸ªæ ¼å­çš„å€¼ for i in range(1, m + 1): for j in range(1, n + 1): if (board[i][j] != -1): # è®¡ç®—å››å‘¨çš„åœ°é›·æ•°é‡ for ii in range(i - 1, i + 2): for jj in range(j - 1, j + 2): if (board[ii][jj] == -1): board[i][j] += 1 print() # æ‰“å°ç»“æžœ for i in range(1, m + 1): for j in range(1, n + 1): print("*", end=" ") if board[i][j] == -1 else print(board[i][j], end=" ") print()# ç”Ÿæˆ10x10, æ¦‚çŽ‡p=0.2çš„æ‰«é›·æ£‹ç›˜sweeper(10, 10, 0.2) å±•ç¤ºæ•ˆæžœ: 12345678910111213141516171819202122&gt;. . . . . . . . . . &gt;. . . . * * . . . * &gt;. . . . . * * * * . &gt;. . . . . . * . * . &gt;. . . . . . . . . . &gt;. . . . . . . . . * &gt;. * . . * . * . . . &gt;. . . . * . . . . . &gt;. * . * . * . . . * &gt;* . . . . * . * . . &gt;&gt;0 0 0 1 2 2 1 0 1 1 &gt;0 0 0 1 * * 4 3 3 * &gt;0 0 0 1 3 * * * * 3 &gt;0 0 0 0 1 3 * 5 * 2 &gt;0 0 0 0 0 1 1 2 2 2 &gt;1 1 1 1 1 2 1 1 1 * &gt;1 * 1 2 * 3 * 1 1 1 &gt;2 2 3 3 * 4 2 1 1 1 &gt;2 * 2 * 4 * 3 1 2 * &gt;* 2 2 1 3 * 3 * 2 1 &gt; tips: ç¬¬7è¡Œä»£ç æ˜¯ç²¾é«“, æœ‰å¾ˆå¤šæ—¶å€™å¯ä»¥é€šè¿‡ç®€å•çš„æ–¹æ³•æ¥é¿å…ç¹ççš„è¾¹ç•Œåˆ¤æ–­è¿‡ç¨‹ Ex: çŸ©é˜µ0å˜æ¢ç»™ä¸€ä¸ªmÃ—nçš„çŸ©é˜µï¼Œå¦‚æžœæœ‰ä¸€ä¸ªå…ƒç´ ä¸º0ï¼Œåˆ™æŠŠè¯¥å…ƒç´ å¯¹åº”çš„è¡Œä¸Žåˆ—æ‰€æœ‰å…ƒç´ å…¨éƒ¨å˜æˆ0ã€‚ 12345matrix = [ [ 1, 1, 1, 1, 1, 0, 1, 1, 1, 1 ], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ], [ 1, 1, 0, 1, 1, 1, 1, 1, 1, 1 ], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ] ] ä¹Ÿå°±æ˜¯å˜æˆè¿™æ · â†“ 12345matrix =[ [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 0, 1, 1, 0, 1, 1, 1, 1], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 0, 1, 1, 0, 1, 1, 1, 1], [1, 1, 0, 1, 1, 0, 1, 1, 1, 1] ] æ€è·¯1: å…ˆæƒ³ç¬¬ä¸€ç§, æˆ‘å†åŽ»åˆ›å»ºä¸€ä¸ª mÃ—n çš„ æ•°ç»„(matrix), ç„¶åŽè¿™ä¸ªæ•°ç»„é‡Œé¢ä¸“é—¨å­˜0çš„ä½ç½®, å°±æ˜¯æŠŠ0çš„ä½ç½®è®¾ç½®ä¸ºTrue; è¿™ç§æ–¹æ³•éœ€è¦ç”¨åˆ°é¢å¤–mxnçš„ç©ºé—´â†’ç©ºé—´å¤æ‚åº¦O(mÃ—n) æ€è·¯2: ç”¨set, ä¸€ä¸ªæ”¾è¡Œ, ä¸€ä¸ªæ”¾åˆ—; å½“ç„¶å¯ä»¥, ä¸è¿‡è¿™ä¸ªé¢˜å…ˆç”¨åˆ—è¡¨æ¥åš æ€è·¯3: æˆ‘ä»¬æ˜¯å¦éœ€è¦ç»´æŒ(maintain)ä¸€ä¸ª mÃ—n çš„æ•°ç»„? æ˜¯å¯ä»¥ä¸éœ€è¦çš„; åªéœ€è¦ä¸¤ä¸ªä¸€ç»´æ•°ç»„å°±å¤Ÿäº†, ä¸€ä¸ªmaintainå“ªäº›åˆ—æœ‰0, å¦ä¸€ä¸ªmaintainå“ªäº›è¡Œæœ‰0; è¿™ç§æ–¹æ³•çš„ç©ºé—´å¤æ‚åº¦ä¸ºO(m+n) â†’space complexity 1234567891011121314def zero(matrix): m = [None] * len(matrix) # è¡Œ n = [None] * len(matrix[0]) # åˆ— for i in range(len(matrix)): # éåŽ†è¡Œ for j in range(len(matrix[0])): # éåŽ†åˆ— if (matrix[i][j] == 0): # å¦‚æžœå‡ºçŽ°äº†0äº† m[i] = 1 # å°±æŠŠè¿™ä¸€è¡Œè®¾ä¸º1 n[j] = 1 # å°±æŠŠè¿™ä¸€åˆ—è®¾ä¸º1 # é€šè¿‡må’Œnä¸¤ä¸ªä¸€ä½æ•°ç»„, ä¿®æ”¹åŽŸæœ‰çŸ©é˜µ(matrix) for i in range(len(matrix)): for j in range(len(matrix[0])): if (m[i] == 1 or n[j] == 1): matrix[i][j] = 0 12345matrix = [ [ 1, 1, 1, 1, 1, 0, 1, 1, 1, 1 ], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ], [ 1, 1, 0, 1, 1, 1, 1, 1, 1, 1 ], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ], [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ] ] 123# åŽŸæœ‰matrixfor x in matrix: print(x, sep=" ") 1234567&gt;# è¾“å‡º&gt;[1, 1, 1, 1, 1, 0, 1, 1, 1, 1]&gt;[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]&gt;[1, 1, 0, 1, 1, 1, 1, 1, 1, 1]&gt;[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]&gt;[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]&gt; â†“â†“â†“ 1234# ä¿®æ”¹åŽmatrixzero(matrix)for x in matrix: print(x, sep=" ") 1234567&gt;# è¾“å‡º&gt;[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]&gt;[1, 1, 0, 1, 1, 0, 1, 1, 1, 1]&gt;[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]&gt;[1, 1, 0, 1, 1, 0, 1, 1, 1, 1]&gt;[1, 1, 0, 1, 1, 0, 1, 1, 1, 1]&gt; Ex: ä¹å®«å›¾ 123456789101112131415161718192021def magic_square(n): magic = [[0] * (n) for i in range(n)] row = n - 1 col = n//2 magic[row][col] = 1 for i in range(2, n * n + 1): try_row = (row + 1) % n try_col = (col + 1) % n if (magic[try_row][try_col] == 0): row = try_row col = try_col else: # rowå¾€ä¸Šç§»1è¡Œ, æœ‰å¯èƒ½ä¼šäº§ç”Ÿè´Ÿæ•°, æ‰€ä»¥+n row = (row - 1 + n) % n magic[row][col] = i for x in magic: print(x, sep=" ") 1magic_square(3) 12345&gt;# è¾“å‡º&gt;[4, 9, 2]&gt;[3, 5, 7]&gt;[8, 1, 6]&gt; 1magic_square(5) 1234567&gt;# è¾“å‡º&gt;[11, 18, 25, 2, 9]&gt;[10, 12, 19, 21, 3]&gt;[4, 6, 13, 20, 22]&gt;[23, 5, 7, 14, 16]&gt;[17, 24, 1, 8, 15]&gt; Ex: æ•°ç‹¬ ç»™ä¸€ä¸ªå¡«å¥½çš„æ•°ç‹¬ï¼ŒéªŒè¯æ˜¯å¦æ­£ç¡® 1234567891011matrix = [ [5,3,4,6,7,8,9,1,2], [6,7,2,1,9,5,3,4,8], [1,9,8,3,4,2,5,6,7], [8,5,9,7,6,1,4,2,3], [4,2,6,8,5,3,7,9,1], [7,1,3,9,2,4,8,5,6], [9,6,1,5,3,7,2,8,4], [2,8,7,4,1,9,6,3,5], [3,4,5,2,8,6,1,7,9]] 123456789101112131415161718192021222324252627282930313233def sudoku(matrix): n = len(matrix) result_row = result_col = result_blk = 0 for i in range(n): result_row = result_col = result_blk = 0 for j in range(n): ## check row tmp = matrix[i][j] if ((result_row &amp; (1 &lt;&lt; (tmp-1))) == 0): result_row = result_row | (1&lt;&lt;(tmp-1)) else: print("row: ", i, j) return False ## check column tmp = matrix[j][i] if ((result_col &amp; (1 &lt;&lt; (tmp-1))) == 0): result_col = result_col | (1&lt;&lt;(tmp-1)) else: print("col: ", j, i) return False ## check block idx_row = (i//3) * 3 + j//3 idx_col = (i%3) * 3 + j%3 tmp = matrix[idx_row][idx_col] if ((result_blk &amp; (1 &lt;&lt; (tmp-1))) == 0): result_blk = result_blk | (1&lt;&lt;(tmp-1)) else: print("block: ", idx_row, idx_col) return False return True 1sudoku(matrix) 12&gt; True&gt; Ex: æ—‹è½¬æ•°ç»„ ç»™ä¸€ä¸ªnÃ—nçš„æ•°ç»„ï¼Œé¡ºæ—¶é’ˆæ—‹è½¬90åº¦ã€‚ 12345678910111213'''ç©ºé—´å¤æ‚åº¦: O(n^2)'''def rotate(matrix): n = len(matrix) result = [[0] * (n) for i in range(n)] for i in range(n): for j in range(n): result[j][n-1-i] = matrix[i][j] for x in result: print(x, sep=" ") 12matrix = [[i*5+j for j in range(5)] for i in range(5)]matrix 123456&gt; [[0, 1, 2, 3, 4],&gt; [5, 6, 7, 8, 9],&gt; [10, 11, 12, 13, 14],&gt; [15, 16, 17, 18, 19],&gt; [20, 21, 22, 23, 24]]&gt; 1rotate(matrix) 123456&gt;[20, 15, 10, 5, 0]&gt;[21, 16, 11, 6, 1]&gt;[22, 17, 12, 7, 2]&gt;[23, 18, 13, 8, 3]&gt;[24, 19, 14, 9, 4]&gt; 123456789101112131415161718192021222324# in-place: ä¸ä½¿ç”¨é¢å¤–ç©ºé—´, åœ¨åŽŸæœ‰æ•°ç»„ä¸Šè¿›è¡Œä¿®æ”¹def rotate_in_place(matrix): n = len(matrix) for layer in range(n//2): first = layer last = n - 1 - layer for i in range(first, last): offset = i - first top = matrix[first][i] # save top ## left-&gt;top matrix[first][i] = matrix[last-offset][first] ##bottom -&gt; left matrix[last-offset][first] = matrix[last][last - offset]; # right -&gt; bottom matrix[last][last - offset] = matrix[i][last]; # top -&gt; right matrix[i][last] = top; # right &lt;- saved top for x in matrix: print(x, sep=" ") 12matrix = [[i*5+j for j in range(5)] for i in range(5)]rotate(matrix) 123456&gt; [20, 15, 10, 5, 0]&gt; [21, 16, 11, 6, 1]&gt; [22, 17, 12, 7, 2]&gt; [23, 18, 13, 8, 3]&gt; [24, 19, 14, 9, 4]&gt; Ex: åè½¬å­—ç¬¦ä¸²12def reverse(s): return s[::-1] 123s = "hello"r = reverse(s) # O(n)r â€˜ollehâ€™ 12345def reverse2(s): l = list(s) for i in range(len(l)//2): l[i], l[len(s)-1-i] = l[len(s)-1-i], l[i] return ''.join(l) 123s = "hello"r = reverse2(s)r â€˜ollehâ€™ Ex: æœ€å¤§è¿žç»­å­ä¸²ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰ä¸€ä¸ªæ•°ç»„æœ‰ä¸”åªæœ‰ä¸€ä¸ªæœ€å¤§æ•°ï¼Œåˆ¤æ–­è¿™ä¸ªæœ€å¤§æ•°æ˜¯å¦æ˜¯å…¶ä»–æ•°çš„ä¸¤å€æˆ–æ›´å¤§ã€‚å¦‚æžœå­˜åœ¨è¿™ä¸ªæ•°ï¼Œåˆ™è¿”å›žå…¶indexï¼Œå¦åˆ™è¿”å›ž-1ã€‚ Example:Input: [1,1,0,1,1,1]Output: 3 12345678910def find_consecutive_ones(nums): """ local: å½“å‰1å‡ºçŽ°çš„æ¬¡æ•° maximum: åŽ†å²ä¸Š1å‡ºçŽ°çš„æœ€å¤§æ¬¡æ•° """ local = maximum = 0 for i in nums: local = local + 1 if i == 1 else 0 maximum = max(maximum, local) return maximum 123nums = [1,1,0,1,1,1,1,0,0,0,0,0,1,1,1,0,0,1]result = find_consecutive_ones(nums)result 4 Ex: æœ€å¤§æ•°ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰ä¸€ä¸ªæ•°ç»„æœ‰ä¸”åªæœ‰ä¸€ä¸ªæœ€å¤§æ•°ï¼Œåˆ¤æ–­è¿™ä¸ªæœ€å¤§æ•°æ˜¯å¦æ˜¯å…¶ä»–æ•°çš„ä¸¤å€æˆ–æ›´å¤§ã€‚å¦‚æžœå­˜åœ¨è¿™ä¸ªæ•°ï¼Œåˆ™è¿”å›žå…¶indexï¼Œå¦åˆ™è¿”å›ž-1ã€‚ ç®€åŒ–æ€è·¯: ä¸éœ€è¦å°†æœ€å¤§æ•°ä¸Žæ¯ä¸ªæ•°éƒ½æ¯”è¾ƒ, åªè¦å’Œç¬¬äºŒå¤§çš„æ•°æ¯”è¾ƒå°±è¡Œ 123456789101112# O(n) time# O(1) spacedef largest_twice(nums): maximum = second = idx = 0 for i in range(len(nums)): if (maximum &lt; nums[i]): second = maximum maximum = nums[i] idx = i elif second &lt; nums[i]: second = nums[i] return idx if (maximum &gt;= second * 2) else -1 123nums = [1, 2,3,8,3,2,1]result = largest_twice(nums)result 3 Ex: Find All Numbers Disappeared in an ArrayGiven an array of integers where 1 â‰¤ a[i] â‰¤ n (n = size of array), some elements appear twice and others appear once. Find all the elements of [1, n] inclusive that do not appear in this array. Could you do it without extra space and in O(n) runtime?You may assume the returned list does not count as extra space. é¢˜ç›®: 30sç»™çˆ·æ‰¾å‡ºåˆ—è¡¨ä¸­æ²¡äº†çš„æ•°å­—ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­1â‰¤a[i]â‰¤n(n=æ•°ç»„å¤§å°)ï¼Œæœ‰äº›å…ƒç´ å‡ºçŽ°ä¸¤æ¬¡ï¼Œè€Œå¦ä¸€äº›å…ƒç´ å‡ºçŽ°ä¸€æ¬¡ã€‚ æŸ¥æ‰¾[1ï¼Œn]ä¸­æ²¡æœ‰å‡ºçŽ°åœ¨æ­¤æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ (åŒ…æ‹¬[1ï¼Œn])ã€‚ ä½ å¯ä»¥åœ¨æ²¡æœ‰é¢å¤–ç©ºé—´çš„æƒ…å†µä¸‹(æŠ½å±‰åŽŸç†å¦å†³)åœ¨O(N)è¿è¡Œæ—¶é—´å†…å®Œæˆå—ï¼Ÿä½ å¯ä»¥å‡å®šè¿”å›žçš„åˆ—è¡¨ä¸ç®—é¢å¤–ç©ºé—´ã€‚ Example:Input: [4,3,2,7,8,2,3,1]Output: [5,6] 1234567# O(n^2)def findDisappearedNumbers1(nums): result = [] for i in range(1, len(nums) + 1): if (i not in nums): result.append(i) return result 12nums = [4,3,2,7,8,2,3,1]print(findDisappearedNumbers1(nums)) [5, 6] 12345def findDisappearedNumbersTest1(nums): start = time.time() r = findDisappearedNumbers1(nums) t = time.time() - start return r, len(nums), t 12345678import timeimport matplotlib.pyplot as pltimport randomimport math%matplotlib inline def random_list(l): return [[i + 1 for i in range(l * n)] for n in range(1, 20)] 1234random_lists = random_list(100)rst = [findDisappearedNumbersTest1(l) for l in random_lists]len(rst)rst [([], 100, 0.0), ([], 200, 0.0), ([], 300, 0.0009765625), ([], 400, 0.0009758472442626953), ([], 500, 0.0009756088256835938), ([], 600, 0.0019519329071044922), ([], 700, 0.0039052963256835938), ([], 800, 0.004901885986328125), ([], 900, 0.004884481430053711), ([], 1000, 0.007781982421875), ([], 1100, 0.006831169128417969), ([], 1200, 0.009760379791259766), ([], 1300, 0.009790897369384766), ([], 1400, 0.014636039733886719), ([], 1500, 0.014640092849731445), ([], 1600, 0.014611959457397461), ([], 1700, 0.017599105834960938), ([], 1800, 0.019518375396728516), ([], 1900, 0.02632427215576172)] 1234x = list(zip(*rst))[1]y = list(zip(*rst))[2]plt.plot(x, y) æ—¶é—´å¤æ‚åº¦O(n^2) 1234567891011# æ€è·¯: æŠŠä¸‹æ ‡å½“æˆæ•°ç»„, å‡ºçŽ°è¿‡çš„æ•°å­—ä¸‹æ ‡ä¼šè¢«æ”¹å˜, æ²¡æœ‰æ”¹å˜çš„æ˜¯ç¼ºå¤±çš„æ•°def findDisappearedNumbers2(nums): # For each number i in nums, # we mark the number that i points as negative. # Then we filter the list, get all the indexes # who points to a positive number for i in range(len(nums)): index = abs(nums[i]) - 1 nums[index] = - abs(nums[index]) return [i + 1 for i in range(len(nums)) if nums[i] &gt; 0] 12nums = [4,3,2,7,8,2,3,1]print(findDisappearedNumbers2(nums)) [5, 6] 123456# O(n)def findDisappearedNumbersTest2(nums): start = time.time() r = findDisappearedNumbers2(nums) t = time.time() - start return r, len(nums), t 1234random_lists = random_list(100)rst = [findDisappearedNumbersTest2(l) for l in random_lists]len(rst)rst [([], 100, 0.0), ([], 200, 0.0), ([], 300, 0.0), ([], 400, 0.0), ([], 500, 0.0009999275207519531), ([], 600, 0.0010001659393310547), ([], 700, 0.0009999275207519531), ([], 800, 0.0), ([], 900, 0.01399993896484375), ([], 1000, 0.0), ([], 1100, 0.0010001659393310547), ([], 1200, 0.0009999275207519531), ([], 1300, 0.0), ([], 1400, 0.0009999275207519531), ([], 1500, 0.0010001659393310547), ([], 1600, 0.0009999275207519531), ([], 1700, 0.0009999275207519531), ([], 1800, 0.0019998550415039062), ([], 1900, 0.0010004043579101562)] 123x = list(zip(*rst))[1]y = list(zip(*rst))[2]plt.plot(x, y) æ—¶é—´å¤æ‚åº¦O(n) Exï¼šPlus OneGiven a non-negative integer represented as a non-empty array of digits, plus one to the integer. You may assume the integer do not contain any leading zero, except the number 0 itself. The digits are stored such that the most significant digit is at the head of the list. ç¿»è¯‘:æ¯”å¦‚è¯´æœ‰ä¸ªdigits = [1, 2, 3]å°±éœ€è¦å¾—åˆ°: [1, 2, 4] æ¯”å¦‚è¯´æœ‰ä¸ªdigits = [9, 9, 9]å°±éœ€è¦å¾—åˆ°: [1, 0, 0, 0] 12345678910111213def plusOne(digits): if len(digits)==0: return False addCarry=1 for i in range(len(digits)-1,-1,-1): digits[i]+=addCarry if digits[i]==10: digits[i]=0 if i==0: digits.insert(0,1) else: break return digits 1234digits = [1, 2, 3]print(plusOne(digits))digits = [9, 9, 9]print(plusOne(digits)) [1, 2, 4][1, 0, 0, 0]]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[find the missing number]]></title>
    <url>%2F2020%2F01%2F04%2Ffind-the-missing-number%2F</url>
    <content type="text"><![CDATA[Question: æ‰¾åˆ°ä¸¢å¤±çš„æ•°å­—çŽ°åœ¨ä½ æ‰‹ä¸Šæœ‰n-1ä¸ªæ•°å­—, è¿™äº›æ•°å­—çš„èŒƒå›´æ˜¯[1, n]ä¸”è¿™n-1ä¸ªæ•°å­—ä¸­æ²¡æœ‰é‡å¤çš„æ•°å­—.ç”±ä¸Šè¿°æ¡ä»¶å¯çŸ¥: ä½ æ‰‹ä¸Šçš„æ•°å­—ä¸¢å¤±äº†ä¸€ä¸ª.è¯·ç¼–å†™ä¸€æ®µé«˜æ•ˆçš„æ‰¾åˆ°è¯¥ç¡®å®žæ•°å­—çš„ä»£ç . è€ƒå¯Ÿéœ€æ±‚ â€‹ é¦–å…ˆä½ åº”è¯¥è¦å¯¹é¢è¯•å®˜é—®çš„è¿™é“é¢˜çš„éœ€æ±‚, åœ¨è¿™é‡Œå°±æ˜¯è¿™ä¸ªæ•°å­—åˆ—è¡¨æ˜¯æœ‰åºçš„è¿˜æ˜¯æ— åºçš„? é‚£ä¹ˆä½ é—®äº†é¢è¯•å®˜ä¹‹åŽå‘¢, é¢è¯•å°±å‘Šè¯‰ä½ äº†, è¿™å°±æ˜¯ä¸€ä¸ªè‰¯å¥½çš„å¼€å§‹. è€ƒå¯Ÿæ€è·¯: é¦–å…ˆéœ€è¦é—®æ¸…æ¥šé¢˜ç›®æ„æ€ è¿™ä¸ªæ•°å­—åˆ—è¡¨æ˜¯æœ‰åºçš„è¿˜æ˜¯æ— åºçš„? è€ƒè™‘å„ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦, ç©ºé—´å¤æ‚åº¦ ç®—æ³•çš„æ€è·¯ ç¬¬ä¸€æ­¥åº”è¯¥æ€Žä¹ˆåš ç¬¬äºŒæ­¥åº”è¯¥æ€Žä¹ˆåš ç¨‹åºå®žçŽ° èƒ½ä¸èƒ½å†™å‡ºä¸€äº›æµ‹è¯•ç”¨ä¾‹, test_case, ç”¨æˆ‘ä»¬å†™å¥½çš„ç¨‹åºè·‘è¿‡åŽ»? å®žçŽ°æ€è·¯(5ç§)ç¬¬1ç§: å…ˆæŽ’åº, å†ç”¨äºŒåˆ†æ³• ä½¿ç”¨äºŒåˆ†æ³• è¿™å°±æ¶‰åŠåˆ°æˆ‘ä»¬çš„Listæ˜¯æœ‰åºçš„è¿˜æ˜¯æ— åºçš„? å…ˆæŽ’åº, å†ç”¨äºŒåˆ†æ³• è¿™å°±æ¶‰åŠåˆ°å„ç§æŽ’åºç®—æ³•çš„ä¼˜åŠ£æ€§ List.sort()æˆ–è€…sorted(List) ç¬¬2ç§: å…ˆæŽ’åº, å†ç”¨çº¿æ€§çš„æŸ¥æ‰¾æ–¹å¼ ä¹Ÿå°±æ˜¯forå¾ªçŽ¯å‘—, æ¯æ¬¡çœ‹è¿™ä¸ª i ç­‰ä¸ç­‰äºŽä¸Šä¸€ä¸ª i+1 ä¸ç­‰äºŽçš„è¯å°±æŠŠå½“å‰çš„ i æ‰“å°å‡ºæ¥ ç¬¬3ç§: å…ˆæ±‚å’Œ(é€Ÿåº¦éžå¸¸å¿«) é¦–å…ˆæˆ‘ä»¬æ˜¯ç¼ºå°‘äº†ä¸€ä¸ªæ•°å­—å¯¹ä¸å¯¹? æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›æ•°å­—åŠ èµ·æ¥, æ±‚å’Œ, è®°ä¸º sum_now ç„¶åŽå¦‚æžœæˆ‘ä»¬ 1~n çš„æ•°å­—éƒ½å­˜åœ¨çš„è¯, åŽŸæœ¬çš„1åˆ°nçš„ç´¯åŠ å’Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å·²ç»çŸ¥é“äº† ä¹Ÿå°±æ˜¯ (1+n) * n / 2 (é¦–ç›¸+æœ«é¡¹) Ã— é¡¹æ•° Ã· 2 è®°ä¸º sum_all é‚£ä¹ˆ sum_all - sum_now å°±èƒ½å¾—å‡ºæˆ‘ä»¬ç¼ºå¤±çš„é‚£ä¸ªæ•°å­— ç¬¬4ç§: è®¡æ•°æŽ’åº å¯ä»¥ç†è§£ä¸ºçŽ°åœ¨æˆ‘ä»¬æœ‰ n ä¸ªæŠ½å±‰, ç¼–å· 1~n å· ç„¶åŽæˆ‘ä»¬é‡åˆ°ä¸€ä¸ªæ•°å­—, å°±æŠŠè¿™ä¸ªæ•°å­—æ”¾åˆ°æŠ½å±‰é‡Œé¢åŽ» è¿™ä¸ªæ˜¯5æˆ‘ä»¬æ”¾åˆ°ç¬¬5ä¸ªæŠ½å±‰ è¿™ä¸ªæ˜¯8æˆ‘ä»¬æ”¾åˆ°ç¬¬8ä¸ªæŠ½å±‰ å½“æ‰€æœ‰æ•°è¿‡å®Œä¸€éåŽ, æˆ‘ä»¬çœ‹é‚£ä¸ªæŠ½å±‰æ˜¯ç©ºçš„, æˆ‘ä»¬æ˜¯ä¸æ˜¯å°±çŸ¥é“å“ªä¸ªæ•°ç¼ºå¤±äº† ç¬¬5ç§: XOR å¼‚æˆ–(é€Ÿåº¦æ˜¯æœ€å¿«çš„, å¼‚æˆ–æ“ä½œæ¯”åŠ å‡ä¹˜é™¤éƒ½è¦å¿«, å› ä¸ºè®¡ç®—æœºæ˜¯è¦åšåŠ å‡ä¹˜é™¤çš„æ—¶å€™è¦å…ˆè½¬æ¢æˆäºŒè¿›åˆ¶å†è¿›è¡Œè®¡ç®—, æ‰€ä»¥ç›´æŽ¥åœ¨äºŒè¿›åˆ¶å±‚é¢ä¸Šçš„å¼‚æˆ–æ“ä½œæ˜¯æœ€å¿«çš„) 0^1 = 1 0^0 = 0 1^0 = 1 1^1 = 0 A^A = 0 A^0 = A aâŠ•b = (Â¬a âˆ§ b) âˆ¨ (a âˆ§Â¬b) å¦‚æžœaã€bä¸¤ä¸ªå€¼ä¸ç›¸åŒï¼Œåˆ™å¼‚æˆ–ç»“æžœä¸º1ã€‚å¦‚æžœaã€bä¸¤ä¸ªå€¼ç›¸åŒï¼Œå¼‚æˆ–ç»“æžœä¸º0ã€‚ æ”¯æŒäº¤æ¢å¾‹ A^B^C = C^B^A = â€¦ è®¡ç®—æœºä¸­æ•°çš„è¿ç®—è½¬æ¢æˆäºŒè¿›åˆ¶è¿›è¡Œçš„, æ¯”å¦‚è¯´æˆ‘ä»¬çš„ 3 è½¬æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯ 0011, 8 è½¬æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯ 1000 åšæ³•: æˆ‘ä»¬å…ˆæ‹¿ 1å¼‚æˆ–2ä¸€ç›´å¼‚æˆ–åˆ°n 1^2^3^4^â€¦^n å†å’Œæˆ‘ä»¬çš„ä¹±åºListçš„å¼‚æˆ–ä½œæ¯”è¾ƒ a0 ^ a1 ^ a2 ^ â€¦^ 0 ^ â€¦ ^ an-2 1,2,3,â€¦å¼‚æˆ–ä¸‹é¢çš„éƒ½å¾—åˆ°0, åªå‰© x å¼‚æˆ–ä¸‹é¢çš„ 0(å› ä¸ºé‚£ä¸ªæ•°å·²ç»ç¼ºå¤±äº†, æ‰€ä»¥æ˜¯0), å¾—åˆ° x é‚£ä¹ˆè¿™ä¸ª x å°±æ˜¯æˆ‘ä»¬ä¸¢å¤±çš„æ•°å­— tips: 98765 * 32 ç­‰åŒäºŽ 98765 * 2^5 ç­‰åŒäºŽåœ¨äºŒè¿›åˆ¶ä¸Šå·¦ç§»5ä½-&gt; ä½æ“ä½œ 198765&lt;&lt;5 æ˜¯ä¸€æ ·çš„]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®ç»“æž„ä¸Žç®—æ³•(Python)]]></title>
    <url>%2F2019%2F08%2F16%2F%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95(Python)%2F</url>
    <content type="text"><![CDATA[Infoä»Žå¤´å¼€å§‹ç”¨Pythonå®žçŽ°åŸºç¡€æ•°æ®ç»“æž„ä¸Žç®—æ³•, åœ¨Gitbookæ›´æ–°å­¦ä¹ ç¬”è®°, Markä¸€ä¸‹~]]></content>
      <categories>
        <category>DataStructure</category>
        <category>Python</category>
        <category>Algorithm</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[pythonä¸­yieldçš„ç”¨æ³•è¯¦è§£[è½¬è½½]]]></title>
    <url>%2F2019%2F08%2F16%2Fyield_in_python%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ä½œè€…åæ§½: é¦–å…ˆæˆ‘è¦åæ§½ä¸€ä¸‹ï¼Œçœ‹ç¨‹åºçš„è¿‡ç¨‹ä¸­é‡è§äº†yieldè¿™ä¸ªå…³é”®å­—ï¼Œç„¶åŽç™¾åº¦çš„æ—¶å€™ï¼Œå‘çŽ°æ²¡æœ‰ä¸€ä¸ªèƒ½ç®€å•çš„è®©æˆ‘æ‡‚çš„ï¼Œè®²èµ·æ¥çœŸTMçš„éƒ½æ˜¯å¤´å¤´æ˜¯é“ï¼Œä»€ä¹ˆå‚æ•°ï¼Œä»€ä¹ˆä¼ é€’çš„ï¼Œè¿˜å£å£å£°å£°è¯´è‡ªå·±çš„æ•™ç¨‹æ˜¯æœ€ç®€å•çš„ï¼Œæœ€æµ…æ˜¾æ˜“æ‡‚çš„ï¼Œæˆ‘å°±æƒ³é—®æ²¡æœ‰æœ‰è€ƒè™‘è¿‡è¯»è€…çš„æ„Ÿå—ã€‚ æŽ¥ä¸‹æ¥æ˜¯æ­£é¢˜ï¼š é¦–å…ˆï¼Œå¦‚æžœä½ è¿˜æ²¡æœ‰å¯¹yieldæœ‰ä¸ªåˆæ­¥åˆ†è®¤è¯†ï¼Œé‚£ä¹ˆä½ å…ˆæŠŠyieldçœ‹åšâ€œreturnâ€ï¼Œè¿™ä¸ªæ˜¯ç›´è§‚çš„ï¼Œå®ƒé¦–å…ˆæ˜¯ä¸ªreturnï¼Œæ™®é€šçš„returnæ˜¯ä»€ä¹ˆæ„æ€ï¼Œå°±æ˜¯åœ¨ç¨‹åºä¸­è¿”å›žæŸä¸ªå€¼ï¼Œè¿”å›žä¹‹åŽç¨‹åºå°±ä¸å†å¾€ä¸‹è¿è¡Œäº†ã€‚çœ‹åšreturnä¹‹åŽå†æŠŠå®ƒçœ‹åšä¸€ä¸ªæ˜¯ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰çš„ä¸€éƒ¨åˆ†ï¼ˆå¸¦yieldçš„å‡½æ•°æ‰æ˜¯çœŸæ­£çš„è¿­ä»£å™¨ï¼‰ï¼Œå¥½äº†ï¼Œå¦‚æžœä½ å¯¹è¿™äº›ä¸æ˜Žç™½çš„è¯ï¼Œé‚£å…ˆæŠŠyieldçœ‹åšreturn,ç„¶åŽç›´æŽ¥çœ‹ä¸‹é¢çš„ç¨‹åºï¼Œä½ å°±ä¼šæ˜Žç™½yieldçš„å…¨éƒ¨æ„æ€äº†ï¼š 123456789def foo(): print("starting...") while True: res = yield 4 print("res:",res)g = foo()print(next(g))print("*"*20)print(next(g)) å°±è¿™ä¹ˆç®€å•çš„å‡ è¡Œä»£ç å°±è®©ä½ æ˜Žç™½ä»€ä¹ˆæ˜¯yieldï¼Œä»£ç çš„è¾“å‡ºè¿™ä¸ªï¼š 12345starting...4********************res: None4 æˆ‘ç›´æŽ¥è§£é‡Šä»£ç è¿è¡Œé¡ºåºï¼Œç›¸å½“äºŽä»£ç å•æ­¥è°ƒè¯•ï¼š1.ç¨‹åºå¼€å§‹æ‰§è¡Œä»¥åŽï¼Œå› ä¸ºfooå‡½æ•°ä¸­æœ‰yieldå…³é”®å­—ï¼Œæ‰€ä»¥fooå‡½æ•°å¹¶ä¸ä¼šçœŸçš„æ‰§è¡Œï¼Œè€Œæ˜¯å…ˆå¾—åˆ°ä¸€ä¸ªç”Ÿæˆå™¨g(ç›¸å½“äºŽä¸€ä¸ªå¯¹è±¡)2.ç›´åˆ°è°ƒç”¨nextæ–¹æ³•ï¼Œfooå‡½æ•°æ­£å¼å¼€å§‹æ‰§è¡Œï¼Œå…ˆæ‰§è¡Œfooå‡½æ•°ä¸­çš„printæ–¹æ³•ï¼Œç„¶åŽè¿›å…¥whileå¾ªçŽ¯3.ç¨‹åºé‡åˆ°yieldå…³é”®å­—ï¼Œç„¶åŽæŠŠyieldæƒ³æƒ³æˆreturn,returnäº†ä¸€ä¸ª4ä¹‹åŽï¼Œç¨‹åºåœæ­¢ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œèµ‹å€¼ç»™resæ“ä½œï¼Œæ­¤æ—¶next(g)è¯­å¥æ‰§è¡Œå®Œæˆï¼Œæ‰€ä»¥è¾“å‡ºçš„å‰ä¸¤è¡Œï¼ˆç¬¬ä¸€ä¸ªæ˜¯whileä¸Šé¢çš„printçš„ç»“æžœ,ç¬¬äºŒä¸ªæ˜¯returnå‡ºçš„ç»“æžœï¼‰æ˜¯æ‰§è¡Œprint(next(g))çš„ç»“æžœï¼Œ4.ç¨‹åºæ‰§è¡Œprint(â€œâ€œ20)ï¼Œè¾“å‡º20ä¸ª*5.åˆå¼€å§‹æ‰§è¡Œä¸‹é¢çš„print(next(g)),è¿™ä¸ªæ—¶å€™å’Œä¸Šé¢é‚£ä¸ªå·®ä¸å¤šï¼Œä¸è¿‡ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä»Žåˆšæ‰é‚£ä¸ªnextç¨‹åºåœæ­¢çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¦æ‰§è¡Œresçš„èµ‹å€¼æ“ä½œï¼Œè¿™æ—¶å€™è¦æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™èµ‹å€¼æ“ä½œçš„å³è¾¹æ˜¯æ²¡æœ‰å€¼çš„ï¼ˆå› ä¸ºåˆšæ‰é‚£ä¸ªæ˜¯returnå‡ºåŽ»äº†ï¼Œå¹¶æ²¡æœ‰ç»™èµ‹å€¼æ“ä½œçš„å·¦è¾¹ä¼ å‚æ•°ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™resèµ‹å€¼æ˜¯None,æ‰€ä»¥æŽ¥ç€ä¸‹é¢çš„è¾“å‡ºå°±æ˜¯res:None,6.ç¨‹åºä¼šç»§ç»­åœ¨whileé‡Œæ‰§è¡Œï¼Œåˆä¸€æ¬¡ç¢°åˆ°yield,è¿™ä¸ªæ—¶å€™åŒæ ·return å‡º4ï¼Œç„¶åŽç¨‹åºåœæ­¢ï¼Œprintå‡½æ•°è¾“å‡ºçš„4å°±æ˜¯è¿™æ¬¡returnå‡ºçš„4. åˆ°è¿™é‡Œä½ å¯èƒ½å°±æ˜Žç™½yieldå’Œreturnçš„å…³ç³»å’ŒåŒºåˆ«äº†ï¼Œå¸¦yieldçš„å‡½æ•°æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°äº†ï¼Œè¿™ä¸ªç”Ÿæˆå™¨æœ‰ä¸€ä¸ªå‡½æ•°å°±æ˜¯nextå‡½æ•°ï¼Œnextå°±ç›¸å½“äºŽâ€œä¸‹ä¸€æ­¥â€ç”Ÿæˆå“ªä¸ªæ•°ï¼Œè¿™ä¸€æ¬¡çš„nextå¼€å§‹çš„åœ°æ–¹æ˜¯æŽ¥ç€ä¸Šä¸€æ¬¡çš„nextåœæ­¢çš„åœ°æ–¹æ‰§è¡Œçš„ï¼Œæ‰€ä»¥è°ƒç”¨nextçš„æ—¶å€™ï¼Œç”Ÿæˆå™¨å¹¶ä¸ä¼šä»Žfooå‡½æ•°çš„å¼€å§‹æ‰§è¡Œï¼Œåªæ˜¯æŽ¥ç€ä¸Šä¸€æ­¥åœæ­¢çš„åœ°æ–¹å¼€å§‹ï¼Œç„¶åŽé‡åˆ°yieldåŽï¼Œreturnå‡ºè¦ç”Ÿæˆçš„æ•°ï¼Œæ­¤æ­¥å°±ç»“æŸã€‚**** 123456789def foo(): print("starting...") while True: res = yield 4 print("res:",res)g = foo()print(next(g))print("*"*20)print(g.send(7)) å†çœ‹ä¸€ä¸ªè¿™ä¸ªç”Ÿæˆå™¨çš„sendå‡½æ•°çš„ä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­å°±æŠŠä¸Šé¢é‚£ä¸ªä¾‹å­çš„æœ€åŽä¸€è¡Œæ¢æŽ‰äº†ï¼Œè¾“å‡ºç»“æžœï¼š 12345starting...4********************res: 74 å…ˆå¤§è‡´è¯´ä¸€ä¸‹sendå‡½æ•°çš„æ¦‚å¿µï¼šæ­¤æ—¶ä½ åº”è¯¥æ³¨æ„åˆ°ä¸Šé¢é‚£ä¸ªçš„ç´«è‰²çš„å­—ï¼Œè¿˜æœ‰ä¸Šé¢é‚£ä¸ªresçš„å€¼ä¸ºä»€ä¹ˆæ˜¯Noneï¼Œè¿™ä¸ªå˜æˆäº†7ï¼Œåˆ°åº•ä¸ºä»€ä¹ˆï¼Œè¿™æ˜¯å› ä¸ºï¼Œsendæ˜¯å‘é€ä¸€ä¸ªå‚æ•°ç»™resçš„ï¼Œå› ä¸ºä¸Šé¢è®²åˆ°ï¼Œreturnçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æŠŠ4èµ‹å€¼ç»™resï¼Œä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™åªå¥½ç»§ç»­æ‰§è¡Œèµ‹å€¼æ“ä½œï¼Œåªå¥½èµ‹å€¼ä¸ºNoneäº†ï¼Œè€Œå¦‚æžœç”¨sendçš„è¯ï¼Œå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå…ˆæŽ¥ç€ä¸Šä¸€æ¬¡ï¼ˆreturn 4ä¹‹åŽï¼‰æ‰§è¡Œï¼Œå…ˆæŠŠ7èµ‹å€¼ç»™äº†res,ç„¶åŽæ‰§è¡Œnextçš„ä½œç”¨ï¼Œé‡è§ä¸‹ä¸€å›žçš„yieldï¼Œreturnå‡ºç»“æžœåŽç»“æŸã€‚ 5.ç¨‹åºæ‰§è¡Œg.send(7)ï¼Œç¨‹åºä¼šä»Žyieldå…³é”®å­—é‚£ä¸€è¡Œç»§ç»­å‘ä¸‹è¿è¡Œï¼Œsendä¼šæŠŠ7è¿™ä¸ªå€¼èµ‹å€¼ç»™reså˜é‡6.ç”±äºŽsendæ–¹æ³•ä¸­åŒ…å«next()æ–¹æ³•ï¼Œæ‰€ä»¥ç¨‹åºä¼šç»§ç»­å‘ä¸‹è¿è¡Œæ‰§è¡Œprintæ–¹æ³•ï¼Œç„¶åŽå†æ¬¡è¿›å…¥whileå¾ªçŽ¯7.ç¨‹åºæ‰§è¡Œå†æ¬¡é‡åˆ°yieldå…³é”®å­—ï¼Œyieldä¼šè¿”å›žåŽé¢çš„å€¼åŽï¼Œç¨‹åºå†æ¬¡æš‚åœï¼Œç›´åˆ°å†æ¬¡è°ƒç”¨nextæ–¹æ³•æˆ–sendæ–¹æ³•ã€‚ è¿™å°±ç»“æŸäº†ï¼Œè¯´ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç”¨è¿™ä¸ªç”Ÿæˆå™¨ï¼Œæ˜¯å› ä¸ºå¦‚æžœç”¨Listçš„è¯ï¼Œä¼šå ç”¨æ›´å¤§çš„ç©ºé—´ï¼Œæ¯”å¦‚è¯´å–0,1,2,3,4,5,6â€¦â€¦â€¦â€¦1000ä½ å¯èƒ½ä¼šè¿™æ ·ï¼š 12for n in range(1000): a=n è¿™ä¸ªæ—¶å€™range(1000)å°±é»˜è®¤ç”Ÿæˆä¸€ä¸ªå«æœ‰1000ä¸ªæ•°çš„listäº†ï¼Œæ‰€ä»¥å¾ˆå å†…å­˜ã€‚è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ç”¨åˆšæ‰çš„yieldç»„åˆæˆç”Ÿæˆå™¨è¿›è¡Œå®žçŽ°ï¼Œä¹Ÿå¯ä»¥ç”¨xrange(1000)è¿™ä¸ªç”Ÿæˆå™¨å®žçŽ°yieldç»„åˆï¼š 1234567def foo(num): print(&quot;starting...&quot;) while num&lt;10: num=num+1 yield numfor n in foo(0): print(n) è¾“å‡ºï¼š 1234567891011starting...12345678910 xrange(1000): 12for n in xrange(1000): a=n å…¶ä¸­è¦æ³¨æ„çš„æ˜¯python3æ—¶å·²ç»æ²¡æœ‰xrange()äº†ï¼Œåœ¨python3ä¸­ï¼Œrange()å°±æ˜¯xrange()äº†ï¼Œä½ å¯ä»¥åœ¨python3ä¸­æŸ¥çœ‹range()çš„ç±»åž‹ï¼Œå®ƒå·²ç»æ˜¯ä¸ª&lt;class â€˜rangeâ€™&gt;äº†ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªlistäº†ï¼Œæ¯•ç«Ÿè¿™ä¸ªæ˜¯éœ€è¦ä¼˜åŒ–çš„ã€‚ æœ¬æ–‡ç« éµå¾ª CC 4.0 by-sa ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŽŸæ–‡å‡ºå¤„é“¾æŽ¥å’Œæœ¬å£°æ˜Žã€‚åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/mieleizhi0522/article/details/82142856]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[kNNç®—æ³•çš„DIYå®žçŽ°(ä»¿ç…§scikit-learn)]]></title>
    <url>%2F2019%2F08%2F15%2FDo-it-yourself-implementation-of-kNN-algorithm%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯kNNç®—æ³•?kNNç®—æ³•, åˆå«Kæœ€è¿‘é‚»ç®—æ³•, å¯ç”¨äºŽåˆ†ç±»æˆ–è€…å›žå½’. æ‰€è°“Kæœ€è¿‘é‚»ï¼Œå°±æ˜¯kä¸ªæœ€è¿‘çš„é‚»å±…çš„æ„æ€ï¼Œè¯´çš„æ˜¯æ¯ä¸ªæ ·æœ¬éƒ½å¯ä»¥ç”¨å®ƒæœ€æŽ¥è¿‘çš„kä¸ªé‚»å±…æ¥ä»£è¡¨ã€‚ å…¶ç‰¹ç‚¹æ˜¯: æ€æƒ³æžåº¦ç®€å• åº”ç”¨æ•°å­¦çŸ¥è¯†å‡ ä¹Žä¸ºé›¶ æ•ˆæžœå¥½ å¯ä»¥è§£é‡Šæœºå™¨å­¦ä¹ ç®—æ³•ä½¿ç”¨è¿‡ç¨‹ä¸­çš„å¾ˆå¤šç»†èŠ‚é—®é¢˜ æ›´å®Œæ•´åˆ»ç”»ä¸€èµ·å­¦ä¹ åº”ç”¨çš„æµç¨‹ åˆ†ç±»ç²¾åº¦é«˜, å¯¹ç¼ºå¤±å€¼ä¸æ•æ„Ÿ æ‡’åŠ è½½, æ¨¡åž‹å¤æ‚åº¦é«˜ kNNç®—æ³•æ‰§è¡Œæµç¨‹ æ ¹æ®æ¬§å‡ é‡Œå¾—è·ç¦»å…¬å¼æ±‚å‡ºæ ·æœ¬ç‚¹ä¸Žæ‰€æœ‰ç‚¹çš„è·ç¦», ç„¶åŽæŒ‰ç…§è·ç¦»å‡åºæŽ’åº, å–å‡ºå‰kä¸ªç‚¹, æ ·æœ¬ç‚¹æ˜¯ä»€ä¹ˆç±»åˆ«, é‚£ä¹ˆkä¸ªç‚¹å°±æ˜¯ä»€ä¹ˆç±»åˆ« kNNçš„å®žè´¨: kä¸ªæ ·æœ¬å¦‚æžœè¶³å¤Ÿåœ°ç›¸ä¼¼çš„è¯, é‚£ä¹ˆä»–ä»¬å°±å¾ˆæœ‰å¯èƒ½å±žäºŽåŒä¸€ä¸ªç±»åˆ« è‡ªå·±åŠ¨æ‰‹å®žçŽ°kNNç®—æ³•123456789101112131415161718192021222324import numpy as npfrom math import sqrtfrom collections import Counterdef kNN_classify(k, X_train, y_train, x): assert 1 &lt;= k &lt;= X_train.shape[0], "k must be valid" assert X_train.shape[0] == y_train.shape[0], \ "the size of X_train must equal to the size of y_train" assert X_train.shape[1] == x.shape[0], \ "the feature number of x must be equal to X_train" distances = [sqrt(np.sum((x_train - x)**2)) for x_train in X_train] nearest = np.argsort(distances) topK_y = [y_train[i] for i in nearest[:k]] votes = Counter(topK_y) return votes.most_common(1)[0][0]]]></content>
      <categories>
        <category>Machine Learning</category>
        <category>Python</category>
        <category>Algorithm</category>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>knn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[First Blog]]></title>
    <url>%2F2019%2F08%2F14%2Ffirst-blog%2F</url>
    <content type="text"><![CDATA[Start -&gt; 3W&amp;1H?ä½ æ˜¯è°? (Who)æˆ‘æ˜¯Yukirito Yukirito = yukiteru + kirito â€‹ å¤©é‡Žé›ªè¾‰ + æ¡äºº ä¸ºä»€ä¹ˆè¦åšBlog? (Why)åœ¨2020-05çš„æ—¶å­¦SVM, åˆ·åˆ°äº†pluskidå¤§ç¥žçš„Blog, ååˆ†å·ç¨Ž. Blogä¸åƒç¤¾äº¤åª’ä½“, è¾“å‡ºç¢Žç‰‡åŒ–ä¿¡æ¯. è€Œæ˜¯ç±»ä¼¼äºŽä¹¦ç±çš„å­é›†. æ‰€ä»¥Blogæ¯”è¾ƒå¥½è¾“å‡ºè¾ƒä¸ºç»“æž„åŒ–çš„ä¿¡æ¯. æŒ‰æ‰€å«ä¿¡æ¯é‡å¤šå°‘æ¥ä¸¾æ —, ä¹¦ç±&gt;Blog&gt;æœ‹å‹åœˆ, By the way, ä¸è¦ä¼å›¾ç”¨ç¢Žç‰‡åŒ–çš„çŸ¥è¯†æ¥æå‡è‡ªå·±çš„æŠ€æœ¯èƒ½åŠ› è¿™ä¸ªBlogæ˜¯æžä»€ä¹ˆçš„? (What)è‡ªå·±ä¹‹å‰ä¸€ç›´æ˜¯åœ¨å°è±¡ç¬”è®°ä¸Šåšç¬”è®°,çŽ°åœ¨å°†é€æ­¥æŠŠåˆé€‚çš„æ•°æ®è½¬ç§»åˆ°Blogä¸Šæ¥åŒ…æ‹¬ä½†ä¸é™äºŽ: ä¸»ä¸šCSå­¦ä¹ ç¬”è®° å‰¯ä¸šå„ç§ç‚¹æ­ªäº†æŠ€èƒ½ä¹¦çš„å­¦ä¹ ç¬”è®° æ¸¸æˆæ”»ç•¥ ä¸ªäººå¿ƒå¾— æ—¶é—´æˆ³2019-08-14 22:18:24 emmmmè¿˜æ²¡å¼€å§‹æ›´å°±æœ‰é¸½çš„é¢„æ„Ÿâ€¦åŽŸåˆ™ä¸Šæ¥è¯´æ›´æ–°é—´éš”ä¸å¤§äºŽä¸€å‘¨. 2020-01-05 02:48:37 okkk, æ²¡æœ‰åŽŸåˆ™, ä¸€æ‹–å°±æ‹–äº†3ä¸ªæœˆ å…¶å®žæ˜¯å½“æ—¶å¿™ç€æ‰¾å·¥ä½œ, æœ€è¿‘ç¨³å®šäº†å°±â€é‡æ“æ—§ä¸šâ€]]></content>
      <categories>
        <category>MISC</category>
      </categories>
  </entry>
</search>
